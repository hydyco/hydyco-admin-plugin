(this["webpackJsonp@hydyco/admin-client"]=this["webpackJsonp@hydyco/admin-client"]||[]).push([[0],{267:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(30),i=n.n(r),l=n(195),o=n(32),s=n(239),u=(n(267),n(88)),j=n(35),d=n(466),b=n(470),h=n(3);var O,f=function(){var e=Object(j.g)(),t={"":"Schema Flow",collections:"Schema",data:"Data Flow"}[e.pathname.split("/")[1]],n={"":"Visualize you database",collections:"Manage your mongoose schema",data:"Manage your data"}[e.pathname.split("/")[1]];return"Data Flow"===t?null:Object(h.jsx)(b.a,{ghost:!1,title:t,subTitle:n})},x=n(24),p=n(75),m=n(480),g=n(481),v=n(482),y=n(31),C=n.n(y),w=n(49),S="INIT_COLLECTION",k="ADD_COLLECTION",T="REMOVE_COLLECTION",L="SET_COLLECTION",z="UPDATE_COLLECTION",I=n(134),q=n.n(I);function F(e){return q.a.post("/admin/model/create/"+e.name,e)}function N(e){var t=e.name;return q.a.delete("/admin/model/delete/"+t)}function E(e){return q.a.post("/admin/model/crud/",e)}function R(e){return D({type:L,collection:e})}function A(e){var t={type:z,collection:e};return function(){var n=Object(w.a)(C.a.mark((function n(c){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e);case 2:c(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}!function(e){e.list="list",e.create="create",e.update="update",e.delete="delete",e.deleteAll="deleteAll",e.ref="ref"}(O||(O={}));var D=function(e){return function(t){return t(e)}},M=d.a.Sider;var B,V,_=function(){var e=Object(j.g)(),t=Object(c.useState)(Object(h.jsx)("img",{className:"logo-large",src:"/img/black-logo.png",alt:""})),n=Object(x.a)(t,2),r=n[0],i=n[1],l=e.pathname.split("/")[1],s=Object(o.c)();return Object(o.d)((function(e){return e.collections})),a.a.useCallback((function(e){return s(R(e))}),[s]),Object(h.jsxs)(M,{collapsible:!0,collapsedWidth:"50",theme:"light",onCollapse:function(e,t){i(e?Object(h.jsx)("img",{className:"logo-small",src:"/img/o-logo.png",alt:""}):Object(h.jsx)("img",{className:"logo-large",src:"/img/black-logo.png",alt:""}))},children:[Object(h.jsx)("div",{className:"logo-container",children:r}),Object(h.jsxs)(p.a,{style:{marginTop:10},mode:"inline",defaultSelectedKeys:[l],children:[Object(h.jsx)(p.a.Item,{icon:Object(h.jsx)(m.a,{}),children:Object(h.jsx)(u.b,{to:"/",children:"Schema Flow"})},""),Object(h.jsx)(p.a.Item,{icon:Object(h.jsx)(g.a,{}),children:Object(h.jsx)(u.b,{to:"/collections",children:"Collections"})},"collection"),Object(h.jsx)(p.a.Item,{icon:Object(h.jsx)(v.a,{}),children:Object(h.jsx)(u.b,{to:"/data",children:"Data Flow"})},"data")]})]})},G=n(22),K=n(474),P=n(251),U=n(479),W=n(477),Y=n(45),Z=n(248),H=n(118),J=n(70),Q=n(476),X=n(255),$=n(483);!function(e){e.string="string",e.number="number",e.boolean="boolean",e.ref="ref",e.date="date",e.array="array",e.object="object",e.enums="enums"}(B||(B={})),function(e){e.hasOne="hasone",e.hasMany="hasmany",e.none="none"}(V||(V={}));var ee=function(e){var t=e.type;return t=t.toLowerCase(),Object(h.jsx)("div",{children:Object(h.jsx)(P.a,{color:function(){switch(t){case B.string:return"#f50";case B.number:return"#d4b106";case B.boolean:return"#52c41a";case B.ref:case B.date:return"#13c2c2";default:return"#8c8c8c"}}(),style:{fontWeight:"bold"},children:function(){switch(t){case B.string:return"Abc";case B.number:return"123";case B.boolean:return"true";case B.ref:return"Relation";case B.date:return"17 Aug";default:return"NA"}}()})})},te=n(473),ne=n(253),ce=n(475),ae=n(471).a.Text;function re(e){var t=e.message,n=void 0===t?"This field is required":t;return Object(h.jsx)(ae,{type:"danger",style:{fontSize:12},strong:!0,children:n})}var ie=function(e){var t=e.collections,n=e.isModalVisible,r=e.setIsModalVisible,i=Object(c.useState)(""),l=Object(x.a)(i,2),s=l[0],u=l[1],j=Object(c.useRef)(),d=Object(o.c)(),b=a.a.useCallback((function(e){return d(function(e){var t={type:k,collection:e};return function(){var n=Object(w.a)(C.a.mark((function n(c){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e);case 2:c(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[d]),O=a.a.useCallback((function(e){return d(R(e))}),[d]),f=function(){if(0!==s.length)if(t.find((function(e){return e.name===s})))Z.b.error("Collection already exists");else{var e={id:Object(ce.a)(),name:s,schema:{},fields:0,x:300*Math.floor(t.length%4)+20,y:60*(Math.floor(t.length/4)+1)};b(e),O(e),u(""),r(!1)}};return Object(c.useEffect)((function(){j.current&&j.current.focus()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Y.a,{type:"primary",shape:"round",onClick:function(){r(!0)},children:"Create New"}),Object(h.jsxs)(te.a,{title:Object(h.jsxs)("span",{children:[" ",Object(h.jsx)(ne.a,{})," Create new collection"]}),visible:n,onOk:f,onCancel:function(){r(!1)},children:[Object(h.jsx)(K.a,{ref:j,placeholder:"Collection Name",value:s,onChange:function(e){var t=e.target.value;/[^a-zA-Z]/.test(t)||u(t)},onKeyDown:function(e){"Enter"===e.key&&f()}}),0===s.length&&Object(h.jsx)(re,{})]})]})},le=n(196),oe=n(160),se=n(478);var ue=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(G.a)(Object(G.a)({},e),c)}))};return Object(h.jsx)(h.Fragment,{children:"boolean"===t.type&&Object(h.jsxs)(W.b,{direction:"vertical",style:{width:"100%"},children:[Object(h.jsx)("span",{children:"Name for the type"}),Object(h.jsx)(K.a,{placeholder:"Type Name",onChange:function(e){return c("name",e.target.value)},defaultValue:t.name}),Object(h.jsx)("span",{children:"Default value"}),Object(h.jsx)(se.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.default,onChange:function(e){return c("default",e)}}),Object(h.jsx)("span",{children:"Required"}),Object(h.jsx)(se.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return c("required",e)}})]})})},je=n(472),de=n(131);var be=function(e){var t=e.state,n=e.setState,a=Object(c.useState)([]),r=Object(x.a)(a,2),i=r[0],l=r[1],o=function(e,t){var c={};c[e]=t,n((function(e){return Object(G.a)(Object(G.a)({},e),c)}))};return Object(h.jsx)(h.Fragment,{children:"number"===t.type&&Object(h.jsxs)(W.b,{direction:"vertical",style:{width:"100%"},children:[Object(h.jsx)("span",{children:"Name for the type"}),Object(h.jsx)(K.a,{placeholder:"Type Name",onChange:function(e){return o("name",e.target.value)}}),Object(h.jsx)("span",{children:"Default value"}),Object(h.jsx)(je.a,{min:1,max:10,onChange:function(e){return o("default",e)},placeholder:"10",style:{width:"100%"}}),Object(h.jsx)("span",{children:"Settings"}),Object(h.jsx)(de.a.Group,{style:{width:"100%"},onChange:function(e){var t={index:!1,required:!1,unique:!1};n((function(n){return Object.keys(t).forEach((function(n){e.includes(n)&&(t[n]=!0)})),Object(G.a)(Object(G.a)({},n),t)})),l(e)},value:i,children:Object(h.jsxs)(W.b,{direction:"vertical",children:[Object(h.jsx)(de.a,{value:"required",children:"Required"}),Object(h.jsx)(de.a,{value:"index",children:"Index"}),Object(h.jsx)(de.a,{value:"unique",children:"Unique"}),Object(h.jsx)(de.a,{value:"minLength",children:"Minimum Length"}),i.includes("minLength")&&Object(h.jsx)(je.a,{min:1,onChange:function(e){return o("minLength",e)}}),Object(h.jsx)(de.a,{value:"maxLength",children:"Maximum Length"}),i.includes("maxLength")&&Object(h.jsx)(je.a,{min:1,onChange:function(e){return o("maxLength",e)}})]})})]})})};var he=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(G.a)(Object(G.a)({},e),c)}))},a=Object(o.d)((function(e){return e.collections}),o.b);return Object(h.jsx)(h.Fragment,{children:"ref"===t.type&&Object(h.jsxs)(W.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(h.jsx)("span",{children:"Name for the type"}),Object(h.jsx)(K.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return c("name",e.target.value)}}),Object(h.jsx)(re,{}),Object(h.jsx)("span",{children:"Relationship"}),Object(h.jsxs)(oe.a.Group,{value:t.relationship,onChange:function(e){return c("relationship",e.target.value)},children:[Object(h.jsx)(oe.a.Button,{value:V.hasMany,children:"Has Many"}),Object(h.jsx)(oe.a.Button,{value:V.hasOne,children:"Has One"})]}),Object(h.jsx)("span",{children:"Auto Populate"}),Object(h.jsxs)(oe.a.Group,{onChange:function(e){return c("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(h.jsx)(oe.a,{value:!0,children:"True"}),Object(h.jsx)(oe.a,{value:!1,children:"False"})]}),Object(h.jsx)("span",{children:"Required"}),Object(h.jsx)(se.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return c("required",e)}}),Object(h.jsx)("span",{children:"Ref"}),Object(h.jsx)(oe.a.Group,{value:t.ref,onChange:function(e){return c("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:a.map((function(e,t){var n=e.name;return Object(h.jsx)(oe.a.Button,{value:n,style:{textTransform:"capitalize"},children:n},t)}))})]})})},Oe=K.a.TextArea,fe={index:!1,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,maxLength:0,minLength:0};var xe=function(e){var t=e.state,n=e.setState,a=Object(c.useState)([]),r=Object(x.a)(a,2),i=r[0],l=r[1],o=Object(c.useState)(""),s=Object(x.a)(o,2),u=s[0],j=s[1],d=function(e,t){var c={};c[e]=t,n((function(e){return Object(G.a)(Object(G.a)({},e),c)}))};return Object(c.useEffect)((function(){var e=Object.keys(t).filter((function(e){return fe[e]&&function(e){return function(t){return t[e]}}(e)(t)}));l(e),t.enum.length&&j(t.enum.join("\n"))}),[t]),Object(h.jsx)(h.Fragment,{children:"string"===t.type&&Object(h.jsxs)(W.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(h.jsx)("span",{children:"Name for the type"}),Object(h.jsx)(K.a,{placeholder:"Type Name",onChange:function(e){return d("name",e.target.value)},value:t.name}),Object(h.jsx)(re,{}),Object(h.jsx)("span",{children:"Default value"}),Object(h.jsx)(K.a,{onChange:function(e){return d("default",e.target.value)},value:t.default,placeholder:"Keep empty for not setting the value"}),Object(h.jsx)("span",{children:"Enums"}),Object(h.jsx)(Oe,{showCount:!0,maxLength:100,style:{width:"100%"},value:u,placeholder:"Keep empty for not setting the value",onChange:function(e){j(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d("enum",u.trim().split("\n"))}}),Object(h.jsx)("span",{children:"Settings"}),Object(h.jsx)(de.a.Group,{style:{width:"100%",height:"100%"},onChange:function(e){n((function(t){return e.includes("maxLength")||(t.maxLength=0),e.includes("minLength")||(t.minLength=0),Object.keys(fe).forEach((function(t){fe[t]=e.includes(t)})),Object(G.a)(Object(G.a)({},t),fe)})),l(e)},value:i,children:Object(h.jsxs)(H.a,{children:[Object(h.jsxs)(J.a,{lg:12,className:"d-flex-col",children:[Object(h.jsx)(de.a,{value:"required",children:"Required"}),Object(h.jsx)(de.a,{value:"index",children:"Index"}),Object(h.jsx)(de.a,{value:"unique",children:"Unique"}),Object(h.jsx)(de.a,{value:"lowercase",disabled:i.includes("uppercase"),children:"Lowercase"}),Object(h.jsx)(de.a,{value:"uppercase",disabled:i.includes("lowercase"),children:"Uppercase"})]}),Object(h.jsxs)(J.a,{lg:12,className:"d-flex-col",children:[Object(h.jsx)(de.a,{value:"trim",children:"Trim"}),Object(h.jsx)(de.a,{value:"minLength",children:"Minimum Length"}),i.includes("minLength")&&Object(h.jsx)(je.a,{min:1,value:t.minLength||0,onChange:function(e){return d("minLength",e)}}),Object(h.jsx)(de.a,{value:"maxLength",children:"Maximum Length"}),i.includes("maxLength")&&Object(h.jsx)(je.a,{min:1,value:t.maxLength||0,onChange:function(e){return d("maxLength",e)}})]})]})})]})})},pe=n(467);var me=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(G.a)(Object(G.a)({},e),c)}))};return Object(h.jsx)(h.Fragment,{children:"date"===t.type&&Object(h.jsxs)(W.b,{direction:"vertical",style:{width:"100%"},children:[Object(h.jsx)("span",{children:"Name for the type"}),Object(h.jsx)(K.a,{placeholder:"Type Name",onChange:function(e){return c("name",e.target.value)}}),Object(h.jsx)("span",{children:"Default value"}),Object(h.jsx)(pe.a,{onChange:function(e){return c("default",e)}})]})})};le.a.TabPane;var ge=function(e){var t=e.selectedCollection,n=e.editSchema,r=Object(c.useState)("1"),i=Object(x.a)(r,2),l=i[0],s=i[1],u=Object(c.useState)(!1),j=Object(x.a)(u,2),d=j[0],b=j[1],O=Object(c.useState)({name:"",type:B.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,enum:[],ref:"none",relationship:V.hasMany,autopopulate:!0}),f=Object(x.a)(O,2),p=f[0],m=f[1],g=Object(o.c)(),v=a.a.useCallback((function(e){return g(A(e))}),[g]),y=function(){b(!1)};Object(c.useEffect)((function(){d||(m({name:"",type:B.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,ref:"none",relationship:V.hasMany,enum:[],autopopulate:!0}),s("1"))}),[d]),Object(c.useEffect)((function(){n&&(b(!0),m(n),s("2"))}),[n]);var C=Object(h.jsx)(Y.a,{type:"primary",onClick:function(){if("2"!==l)s((function(e){return(+e+1).toString()}));else{var e=Object(G.a)({},t.schema);if(!n&&e[p.name])return void Z.b.error("Type already exist");var c=t.fields+1;e[p.name]=p;var a=Object(G.a)(Object(G.a)({},t),{},{schema:e,fields:c});v(a),y()}},disabled:0===p.name.length,children:"Save"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Y.a,{type:"primary",onClick:function(){b(!0)},style:{width:"100%",height:50,textTransform:"uppercase",fontWeight:"bold"},children:"Add New Field"}),Object(h.jsxs)(te.a,{title:Object(h.jsxs)(W.b,{children:[" ",Object(h.jsx)(ne.a,{}),Object(h.jsxs)(oe.a.Group,{onChange:function(e){m((function(t){return Object(G.a)(Object(G.a)({},t),{},{type:e.target.value})}))},value:p.type,children:[Object(h.jsx)(oe.a.Button,{value:B.string,children:"String"}),Object(h.jsx)(oe.a.Button,{value:B.boolean,children:"Boolean"}),Object(h.jsx)(oe.a.Button,{value:B.number,children:"Number"}),Object(h.jsx)(oe.a.Button,{value:B.ref,children:"Ref"}),Object(h.jsx)(oe.a.Button,{value:B.date,children:"Date"})]})]}),visible:d,onOk:y,onCancel:function(){b(!1)},footer:C,width:800,children:[Object(h.jsx)(xe,{state:p,setState:m}),Object(h.jsx)(ue,{state:p,setState:m}),Object(h.jsx)(be,{state:p,setState:m}),Object(h.jsx)(he,{state:p,setState:m}),Object(h.jsx)(me,{state:p,setState:m})]})]})},ve=n(133),ye=te.a.confirm;var Ce=function(e){var t=e.removeCollectionType,n=e.collection,c=e.key;return ye({title:"Sure you want to delete type?",icon:Object(h.jsx)(ve.a,{}),content:null,onOk:function(){!function(){var e=n.schema;delete e[c],n.schema=e,n.fields=n.fields-1,t(n)}()},onCancel:function(){console.log("Cancel")}})},we=te.a.confirm;var Se=function(e){var t=e.collection,n=e.deleteCollectionAction;return we({title:"Sure you want to delete this collection?",icon:Object(h.jsx)(ve.a,{}),content:null,onOk:function(){n(t),Z.b.success("Collection removed")},onCancel:function(){console.log("Cancel")}})},ke=d.a.Sider,Te=d.a.Content;K.a.Search;var Le=function(){var e=Object(c.useState)(),t=Object(x.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),l=Object(x.a)(i,2),s=l[0],u=l[1],j=Object(o.d)((function(e){return e.collections})),O=Object(c.useState)([]),f=Object(x.a)(O,2),p=f[0],m=f[1],g=Object(o.d)((function(e){return e.selectedCollection}),o.b),v=Object(o.c)(),y=a.a.useCallback((function(e){return v(R(e))}),[v]),S=a.a.useCallback((function(e){return v(A(e))}),[v]),k=a.a.useCallback((function(e){return v(A(e))}),[v]),L=a.a.useCallback((function(e){return v(function(e){var t={type:T,collection:e};return function(){var n=Object(w.a)(C.a.mark((function n(c){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N(e);case 2:c(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[v]);return Object(c.useEffect)((function(){!g&&j.length&&y(j[0]),m(j)}),[j]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(d.a,{style:{height:"100%"},children:[Object(h.jsxs)(ke,{width:"400",theme:"light",style:{backgroundColor:"transparent"},children:[Object(h.jsx)(b.a,{title:"Collection List",extra:[Object(h.jsx)(P.a,{color:"black",style:{borderRadius:"50%"},children:j.length}),Object(h.jsx)(ie,{collections:j,isModalVisible:s,setIsModalVisible:u})]}),Object(h.jsx)("div",{style:{padding:10},children:Object(h.jsx)(K.a,{size:"large",placeholder:"Search Collection",onChange:function(e){var t=[];e.target.value.length?(t=j.filter((function(t){return t.name.trim().toLowerCase().includes(e.target.value.toLowerCase())})),m(t)):m(j)}})}),Object(h.jsx)(U.b,{grid:{gutter:10,xs:1,sm:1,md:1,lg:1,xl:1,xxl:1},dataSource:p,style:{padding:10,height:"80vh",overflow:"auto"},renderItem:function(e,t){return Object(h.jsx)(U.b.Item,{children:Object(h.jsxs)(P.a,{style:{textTransform:"capitalize",cursor:"pointer",height:55,width:"100%",display:"grid",placeItems:"center",fontSize:"20px",letterSpacing:1.3},color:e.name===(null===g||void 0===g?void 0:g.name)?"black":"default",onClick:function(){y(e)},children:[e.name,Object(h.jsxs)("span",{style:{fontSize:12},children:[e.fields," fields"]})]},t)},t)}})]}),g&&Object(h.jsx)(d.a,{style:{backgroundColor:"#fafafb",height:"100%"},children:Object(h.jsxs)(Te,{children:[Object(h.jsx)(b.a,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:g.name}),extra:[Object(h.jsxs)(W.b,{children:[Object(h.jsx)(Y.a,{onClick:function(){k(g),Z.b.success("Collection Saved")},children:"Save"}),Object(h.jsx)(Y.a,{type:"primary",onClick:function(){Se({deleteCollectionAction:L,collection:g})},children:"Delete"})]})]}),Object(h.jsx)("br",{}),Object(h.jsx)(H.a,{children:Object(h.jsx)(J.a,{span:24,style:{padding:20},children:Object(h.jsxs)(Q.a,{bordered:!1,style:{boxShadow:"rgb(227 233 243) 0px 2px 4px"},title:Object(h.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(h.jsx)("h1",{children:"".concat(g.fields," fields")})}),bodyStyle:{padding:0},children:[Object.keys(g.schema).map((function(e,t){var n=g.schema[e],c=n.type;return Object(h.jsxs)(H.a,{gutter:0,style:{height:60,padding:15,borderBottom:"1px solid #f0f0f0"},align:"middle",children:[Object(h.jsx)(J.a,{span:6,children:Object(h.jsx)(ee,{type:c})}),Object(h.jsxs)(J.a,{span:6,children:[Object(h.jsx)("span",{style:{fontSize:15,color:"#141414",fontWeight:500},children:e})," "]}),Object(h.jsxs)(J.a,{span:6,children:[Object(h.jsx)("span",{style:{fontSize:15,color:"#141414",textTransform:"capitalize"},children:c})," "]}),Object(h.jsx)(J.a,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:Object(h.jsxs)(W.b,{size:25,children:[Object(h.jsx)(X.a,{style:{color:"#8c8c8c",fontSize:20},onClick:function(){return r(Object(G.a)(Object(G.a)({},n),{},{name:e}))}}),Object(h.jsx)($.a,{style:{color:"#cf1322",fontSize:20},className:"pointer",onClick:function(){return Ce({removeCollectionType:S,collection:g,key:e})}})]})})]},t)})),Object(h.jsx)(ge,{selectedCollection:g,editSchema:n})]})})})]})})]})})},ze=n(249),Ie=n(252),qe=n(484),Fe=n(256);var Ne=function(e){var t=e.collection,n=Object.keys(t.schema).map((function(e,n){return{key:n,field:e,type:t.schema[e].type}})),a=Object(c.useState)(!0),r=Object(x.a)(a,2),i=r[0],l=r[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h2",{style:{backgroundColor:"#1890ff",textTransform:"capitalize",padding:10,color:"white",letterSpacing:1.5,display:"flex",justifyContent:"space-between",margin:0},children:[t.name,Object(h.jsxs)("span",{style:{cursor:i?"zoom-out":"zoom-in"},onClick:function(){return l(!i)},children:[" ",i?Object(h.jsx)(Fe.a,{}):Object(h.jsx)(qe.a,{})," "]})]}),i&&Object(h.jsx)("table",{style:{width:"100%",transition:"5s"},children:n.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{paddingLeft:8,textAlign:"left",fontSize:16,letterSpacing:1.2},children:e.field}),Object(h.jsx)("td",{style:{paddingRight:8,textAlign:"right",fontSize:14,letterSpacing:1.2,color:"#8c8c8c"},children:e.type})]},e.key)}))})]})},Ee=function(){var e=Object(o.d)((function(e){return e.collections})),t=Object(c.useState)([]),n=Object(x.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([0,0]),l=Object(x.a)(i,2),s=l[0],u=l[1],j=function(){var t=[];e.forEach((function(e,n){t.push({id:e.name,data:{label:Object(h.jsx)("div",{children:Object(h.jsx)(Ne,{collection:e})})},style:{padding:0,width:"300px",borderColor:"#40a9ff",borderRadius:0},position:{x:e.x,y:e.y}}),t.push.apply(t,Object(ze.a)(function(e,t,n){var c=[];return Object.keys(e).forEach((function(a,r){e[a].type===B.ref&&c.push({id:"e1-".concat(n,"-").concat(r,"-").concat(a),source:t,target:e[a].ref,type:"smoothstep",label:"".concat(t," ").concat(e[a].relationship," ").concat(e[a].ref),animated:!1,labelStyle:{textTransform:"lowercase",fontSize:20,letterSpacing:1.2,backgroundColor:"#ff9c6e"},style:{width:"100%",padding:20,borderRadius:5}})})),c}(e.schema,e.name,e.id)))})),r(t)};Object(c.useEffect)((function(){j(),e.length&&(u([parseInt(e[0].x.toString()),parseInt(e[0].y.toString())]),console.log(s))}),[e]);var d=function(){var t=Object(w.a)(C.a.mark((function t(n,c,a){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.find((function(e){return e.name===n}))){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.x=c,r.y=a,t.next=8,F(r);case 8:console.log("Node Position Updated"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n,c){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{style:{width:"100%",height:"100vh",overflow:"auto"},children:Object(h.jsx)(Ie.a,{defaultPosition:s,elements:a,minZoom:.4,defaultZoom:1,snapToGrid:!0,snapGrid:[15,15],onlyRenderVisibleElements:!0,onNodeDragStop:function(e,t){d(t.id,t.position.x,t.position.y)}})})},Re=n(468),Ae=n(485),De=n(243),Me=n.n(De),Be=n(130),Ve=n(469),_e=n(59),Ge=n.n(_e),Ke=Be.a.Option;var Pe=function(e){var t=e.schemaValue,n=Object(c.useState)([]),a=Object(x.a)(n,2),r=a[0],i=a[1],l=Object(c.useState)(""),o=Object(x.a)(l,2),s=o[0],u=o[1],j=Object(c.useState)([]),d=Object(x.a)(j,2),b=d[0],f=d[1],p=Object(c.useState)(""),m=Object(x.a)(p,2),g=m[0],v=m[1],y=function(){var e=Object(w.a)(C.a.mark((function e(){var n,c,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={model:t.ref,operations:O.ref,data:{query:{search:s}}},e.next=4,E(n);case 4:c=e.sent,a=c.data,i(a.list),f(a.searchValues),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=r.map((function(e){return Object(h.jsx)(Ke,{value:e._id,children:b.map((function(t){var n;return(null===(n=e[t])||void 0===n?void 0:n.length)?"".concat(e[t]):e._id}))})}));return Object(c.useEffect)((function(){y()}),[s]),Object(h.jsx)(Ve.a.Item,{label:Object(h.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(h.jsx)(Be.a,{showSearch:!0,value:g,placeholder:"Search anything in ".concat(t.name),defaultActiveFirstOption:!0,showArrow:!1,filterOption:!1,onSearch:function(e){return u(e)},onChange:function(e){return v(e)},notFoundContent:null,mode:"hasmany"===t.relationship?"multiple":void 0,children:S})})},Ue=Be.a.Option;var We=function(e){var t=e.selectedCollection,n=e.action,c=void 0===n?"create":n,a=e.id,r=e.selectedRecord,i=null===t||void 0===t?void 0:t.schema,l=function(){var e=Object(w.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={model:(null===t||void 0===t?void 0:t.name)||"",operations:"create"===c?O.create:O.update,data:{body:n,id:a}},e.next=4,E(r);case 4:Z.b.success("Data Saved"),window.history.back(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Z.b.error(e.t0.response.data),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)(b.a,{onBack:function(){return window.history.back()},title:"create"===c?"Create New":"Edit"}),Object(h.jsx)(Q.a,{style:{marginLeft:10,marginRight:10},title:Object(h.jsx)("span",{style:{letterSpacing:1.2,textTransform:"capitalize"},children:null===t||void 0===t?void 0:t.name}),children:Object(h.jsxs)(Ve.a,{name:"basic",onFinish:function(e){console.log("Success:",e),l(e)},onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",size:"large",children:[i&&Object.keys(i).map((function(e){var t,n=function(e){return function(t){return t[e]}}(e)(i);switch(n.type){case"string":return Object(h.jsx)(Ve.a.Item,{label:Object(h.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required,enum:["male","female"]}],initialValue:"update"===c?r[n.name]:"",children:n.enum.length?Object(h.jsx)(Be.a,{placeholder:"Select ".concat(n.name),children:Object(h.jsx)(h.Fragment,{children:n.enum.map((function(e){return Object(h.jsx)(Ue,{value:e,children:e})}))})}):Object(h.jsx)(K.a,{})});case"number":return Object(h.jsx)(Ve.a.Item,{label:Object(h.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===c?r[n.name]:"",children:Object(h.jsx)(je.a,{style:{width:300}})});case"date":return Object(h.jsx)(Ve.a.Item,{label:Object(h.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===c?Ge()(r[n.name]):Ge()(),children:Object(h.jsx)(pe.a,{})});case"boolean":return Object(h.jsx)(Ve.a.Item,{label:Object(h.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===c?null===(t=r[n.name])||void 0===t?void 0:t.toString():"false",children:Object(h.jsxs)(Be.a,{placeholder:"Select",children:[Object(h.jsx)(Ue,{value:"true",children:"True"}),Object(h.jsx)(Ue,{value:"false",children:"False"})]})});case"ref":return Object(h.jsx)(Pe,{schemaValue:n});default:return null}})),Object(h.jsx)(Ve.a.Item,{children:Object(h.jsx)(Y.a,{type:"primary",htmlType:"submit",children:"create"===c?"Save":"Update"})})]})})]})},Ye=n(193),Ze=n.n(Ye);var He=function e(t){return t=t.data,Object(h.jsx)("div",{style:{borderLeft:"6px solid #1890ff",border:"1px dotted #1890ff",padding:10,margin:2,width:"100%"},children:Object.keys(t).map((function(n){return console.log(n),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(W.b,{direction:"vertical",children:[Object(h.jsx)(Ze.a,{style:{textTransform:"capitalize"},type:"secondary",children:n}),Object(h.jsx)("p",{children:"object"===typeof t[n]?Object(h.jsx)(e,{data:t[n]}):t[n]})]}),Object(h.jsx)("br",{})]})}))})},Je=function(e){var t=e.selectedCollection,n=(e.action,e.id,e.selectedRecord);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.a,{onBack:function(){return window.history.back()},title:t.name,style:{textTransform:"capitalize"},ghost:!1}),Object(h.jsx)(Q.a,{style:{margin:10},children:Object(h.jsx)("div",{children:Object.keys(n).map((function(e){return"key"!==e&&Object(h.jsxs)("div",{children:[Object(h.jsxs)(W.b,{direction:"vertical",style:{width:"100%"},children:[Object(h.jsx)(Ze.a,{style:{textTransform:"capitalize"},type:"secondary",children:e}),Object(h.jsx)("p",{children:Array.isArray(n[e])?n[e].map((function(e){return Object(h.jsx)(He,{data:e})})):"object"===typeof n[e]?Object(h.jsx)(He,{data:n[e]}):n[e].toString()})]}),Object(h.jsx)("br",{})]})}))})})]})},Qe=n(254),Xe=Re.a.Column,$e=te.a.confirm;var et=function(){var e=Object(j.h)().collection,t=Object(j.f)(),n=Me.a.parse(window.location.href.split("?")[1]),a=Object(c.useState)([]),r=Object(x.a)(a,2),i=r[0],l=r[1],s=Object(c.useState)({}),u=Object(x.a)(s,2),d=(u[0],u[1],Object(c.useState)({})),f=Object(x.a)(d,2),p=(f[0],f[1],Object(c.useState)({})),m=Object(x.a)(p,2),g=(m[0],m[1],Object(c.useState)([])),v=Object(x.a)(g,2),y=v[0],S=v[1],k=Object(c.useState)({}),T=Object(x.a)(k,2),L=T[0],z=T[1],I=Object(c.useState)(!0),q=Object(x.a)(I,2),F=q[0],N=q[1],A=Object(c.useState)([]),D=Object(x.a)(A,2),M=D[0],B=D[1],V=Object(c.useState)({current:1,pageSize:10}),_=Object(x.a)(V,2),K=_[0],H=_[1],J=Object(o.c)(),Q=Object(o.d)((function(e){return e.selectedCollection}),o.b),ee=Object(c.useCallback)((function(e){return J(R(e))}),[J]),te=Object(o.d)((function(e){return e.collections}),o.b),ce=function(){var e=Object(w.a)(C.a.mark((function e(t,n){var c,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,c={model:t,operations:O.list,data:{query:{pagination:n}}},e.next=5,E(c);case 5:a=e.sent,r=a.data,H(r.pagination),l(r.list),S(r.column),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:N(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var t=Object(w.a)(C.a.mark((function t(n){var c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),t.prev=1,c={model:e,operations:O.delete,data:{id:n}},t.next=5,E(c);case 5:Z.b.success("Record Deleted"),ce(e,K),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:N(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),re=function(){var t=Object(w.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),t.prev=1,n={model:e,operations:O.deleteAll,data:{id:M}},t.next=5,E(n);case 5:Z.b.success("Records Deleted"),B([]),ce(e,K),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:N(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){e&&0===Object.keys(n).length&&(S([]),l([]),ce(e,K)),Q||t.push("/data")}),[e,Q,window.location.href]);var ie=i.map((function(e,t){return Object(G.a)({key:t},e)})),le=y.map((function(e){var t=e.name,n=e.type;return{title:t.toString(),dataIndex:t.toString(),key:t.toString(),type:n}}));return le.push({title:"Action",key:"operation",fixed:"right",width:50,type:"operation"}),e?n.action&&"create"===n.action&&Q?Object(h.jsx)(We,{selectedCollection:Q,action:"create"}):n.action&&"update"===n.action&&Q?Object(h.jsx)(We,{selectedCollection:Q,action:"update",id:n.id,selectedRecord:L}):n.action&&"show"===n.action&&Q?Object(h.jsx)(Je,{selectedCollection:Q,action:"show",id:n.id,selectedRecord:L}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.a,{style:{marginTop:2},ghost:!1,onBack:function(){return window.history.back()},title:Object(h.jsxs)(W.b,{children:[Object(h.jsxs)("span",{style:{textTransform:"capitalize"},children:[e," "]}),K.total&&Object(h.jsx)(P.a,{color:"blue",style:{borderRadius:"50%"},children:K.total})]}),extra:[M.length?Object(h.jsxs)(Y.a,{onClick:function(){return $e({title:"Sure you want to delete selected records?",icon:Object(h.jsx)(ve.a,{}),content:null,onOk:function(){re()},onCancel:function(){console.log("Cancel")}})},children:[Object(h.jsx)($.a,{}),"Delete"]}):null,Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(Ae.a,{}),"Filter"]},"2"),Object(h.jsxs)(Y.a,{type:"primary",onClick:function(){t.push("/data/".concat(e,"?action=create"))},children:[Object(h.jsx)(ne.a,{}),"Create"]},"1")]}),Object(h.jsx)(Re.a,{loading:F,style:{padding:10},dataSource:ie,size:"middle",rowKey:function(e){return e._id},rowSelection:{selectedRowKeys:M,onChange:function(e){B(e)}},pagination:K,onChange:function(t,n,c){H(t),ce(e,t)},children:le.map((function(n){switch(n.type){case"objectId":return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),width:70,dataIndex:n.dataIndex},n.key);case"boolean":return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e,t,n){return void 0===e?null:Object(h.jsx)(h.Fragment,{children:e?Object(h.jsx)(P.a,{color:"green",style:{textTransform:"capitalize"},children:e.toString()}):Object(h.jsx)(P.a,{color:"red",style:{textTransform:"capitalize"},children:e.toString()})})}},n.key);case"date":return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return e?Object(h.jsx)("span",{children:Ge()(e).format("MM/DD/YYYY hh:mm")}):null}},n.key);case"operation":return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,width:60,render:function(n,c){return Object(h.jsxs)(W.b,{children:[Object(h.jsx)(Y.a,{icon:Object(h.jsx)(Qe.a,{}),onClick:function(){z(c),t.push("/data/".concat(e,"?action=show&id=").concat(c._id))}}),Object(h.jsx)(Y.a,{type:"text",icon:Object(h.jsx)(X.a,{}),onClick:function(){z(c),t.push("/data/".concat(e,"?action=update&id=").concat(c._id))}}),Object(h.jsx)(Y.a,{type:"text",icon:Object(h.jsx)($.a,{}),onClick:function(){return $e({title:"Sure you want to delete this record?",icon:Object(h.jsx)(ve.a,{}),content:null,onOk:function(){ae(c._id)},onCancel:function(){console.log("Cancel")}})}})]})}},n.key);case"hasone":return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return e&&Object(h.jsx)(W.b,{direction:"vertical",children:"string"===typeof e?Object(h.jsxs)("span",{children:[e," "]}):Object.values(e).map((function(e){return"string"!==typeof e?null:Object(h.jsxs)("span",{children:[e," "]})}))})}},n.key);case"hasmany":return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return Object(h.jsxs)("span",{children:[null===e||void 0===e?void 0:e.length," ",n.title]})}},n.key);default:return Object(h.jsx)(Xe,{title:Object(h.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex},n.key)}}))})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.a,{title:"Available Collections",subTitle:"Select any collection to view data",ghost:!1}),Object(h.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:20,width:"100%"},children:Object(h.jsx)(U.b,{dataSource:te,renderItem:function(e){return Object(h.jsx)(P.a,{style:{paddingTop:15,paddingBottom:15,textTransform:"capitalize",margin:5,letterSpacing:1.2,cursor:"pointer",alignContent:"center",paddingLeft:30,paddingRight:30,fontWeight:600,fontSize:20},onClick:function(){ee(e),t.push("/data/".concat(e.name))},children:Object(h.jsx)("span",{children:e.name})})}})})]})},tt=d.a.Content;var nt=function(){var e=Object(o.c)();return Object(c.useEffect)((function(){e(function(){var e=Object(w.a)(C.a.mark((function e(t){var n,c,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("/admin/model/list");case 2:n=e.sent,c=n.data,a={type:S,collections:c,collection:c[0]||{}},t(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(h.jsx)(d.a,{className:"main",children:Object(h.jsxs)(u.a,{children:[Object(h.jsx)(_,{}),Object(h.jsxs)(d.a,{children:[Object(h.jsx)(f,{}),Object(h.jsx)(tt,{style:{overflow:"auto"},children:Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/",exact:!0,component:Ee}),Object(h.jsx)(j.a,{path:"/collections",exact:!0,component:Le}),Object(h.jsx)(j.a,{path:"/data",exact:!0,component:et}),Object(h.jsx)(j.a,{path:"/data/:collection",exact:!0,component:et})]})})]})]})})},ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,486)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},at={collections:[],selectedCollection:void 0},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(G.a)(Object(G.a)({},e),{},{collections:t.collections||[]});case k:return Object(G.a)(Object(G.a)({},e),{},{collections:e.collections.concat(t.collection).sort((function(e,t){return e.name.localeCompare(t.name)}))});case T:var n=e.collections.filter((function(e){return e.id!==t.collection.id})).sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(G.a)(Object(G.a)({},e),{},{collections:n,selectedCollection:void 0});case L:var c=t.collection;return Object(G.a)(Object(G.a)({},e),{},{selectedCollection:c});case z:var a=t.collection;return e.collections=e.collections.map((function(e){return e.id===a.id?a:e})),e.selectedCollection=a,Object(G.a)({},e)}return e},it=Object(l.b)(rt,Object(l.a)(s.a));"".concat("","/dark-theme.css");i.a.render(Object(h.jsx)(o.a,{store:it,children:Object(h.jsx)(nt,{})}),document.getElementById("root")),ct()}},[[463,1,2]]]);
//# sourceMappingURL=main.77834a5e.chunk.js.map