(this["webpackJsonp@hydyco/admin-client"]=this["webpackJsonp@hydyco/admin-client"]||[]).push([[0],{257:function(e){e.exports=JSON.parse('{"name":"@hydyco/admin-client","version":"0.0.1","private":true,"dependencies":{"@ant-design/dark-theme":"^2.0.2","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/axios":"^0.14.0","@types/jest":"^26.0.15","@types/node":"^12.20.15","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","@types/react-router-dom":"^5.1.7","@types/uuid":"^8.3.0","@use-it/event-listener":"^0.1.6","antd":"^4.16.1","axios":"^0.21.1","jsoneditor":"^9.5.2","jsoneditor-react":"^3.1.1","prettysize":"^2.0.0","query-string":"^7.0.1","react":"^17.0.2","react-css-theme-switcher":"^0.3.0","react-dom":"^17.0.2","react-error-boundary":"^3.1.3","react-flow-renderer":"^9.6.0","react-json-editor-ajrm":"^2.5.13","react-redux":"^7.2.4","react-router-dom":"^5.2.0","react-scripts":"4.0.3","redux":"^4.1.0","redux-thunk":"^2.3.0","typescript":"^4.1.2","uuid":"^8.3.2","web-vitals":"^1.0.1"},"scripts":{"start":"PORT=3005 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","theme":"lessc --silent --js ./src/style.less ./public/style.css"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react-redux":"^7.1.16","@types/redux":"^3.6.0","@types/redux-thunk":"^2.1.0","less":"^4.1.1","less-plugin-npm-import":"^2.1.0"},"proxy":"http://localhost:3002"}')},280:function(e,t,n){},476:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),i=n(33),l=n.n(i),s=n(209),o=n(34),u=n(253),j=(n(280),n(102)),d=n(43),b=n(479),h=n(498),f=n(48),O=n(259),p=n(27),x=n.n(p),m=n(46),g="INIT_COLLECTION",y="ADD_COLLECTION",v="REMOVE_COLLECTION",C="SET_COLLECTION",w="UPDATE_COLLECTION",k=n(263),S=n(101),T=n.n(S);function z(e){return T.a.post("/admin/model/create/"+e.name,e)}function I(e){var t=e.name;return T.a.delete("/admin/model/delete/"+t)}function F(e){return T.a.post("/admin/model/crud/",e)}function L(e){return q({type:C,collection:e})}function N(e){var t={type:w,collection:e};return function(){var n=Object(m.a)(x.a.mark((function n(c){var a;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="updatable",k.b.loading({content:"Saving...",key:a}),n.next=4,z(e);case 4:k.b.success({content:"Saved!",key:a,duration:2}),c(t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}T.a.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.authorization=localStorage.getItem("token")),e}),(function(e){return Promise.reject(e)})),function(e){e.list="list",e.create="create",e.update="update",e.delete="delete",e.deleteAll="deleteAll",e.ref="ref"}(c||(c={}));var q=function(e){return function(t){return t(e)}},E=n(488),A=n(3);var D=function(){var e=Object(d.g)(),t={"":"Schema Flow",collections:"Schema",data:"Data Flow"}[e.pathname.split("/")[1]],n={"":"Visualize you database",collections:"Manage your mongoose schema",data:"Manage your data"}[e.pathname.split("/")[1]];return"Data Flow"===t?null:Object(A.jsx)(A.Fragment,{children:t&&Object(A.jsx)(E.a,{ghost:!1,title:t,subTitle:n})})},R=n(22),M=n(78),B=n(480),V=n(495),_=n(499),P=n(500),G=n(501),U=n(186),H=n(502),K=n(503),J=n(504),W=n(505),Y=n(506),Z=n(507),Q=n(508),X=n(509),$=b.a.Sider;var ee,te,ne=function(){var e=Object(d.g)(),t=Object(a.useState)(!1),n=Object(R.a)(t,2),c=n[0],r=n[1],i=e.pathname.split("/")[1],l=[{key:"",to:"/",name:"Schema Flow",icon:Object(A.jsx)(_.a,{})},{key:"collections",to:"/collections",name:"Collections",icon:Object(A.jsx)(P.a,{})},{key:"data",to:"/data",name:"Data Flow",icon:Object(A.jsx)(G.a,{})}],s=[{key:"files",to:"/files",name:"Files",icon:Object(A.jsx)(U.a,{})},{key:"auth",to:"/auth",name:"Auth",icon:Object(A.jsx)(H.a,{})}];return Object(A.jsxs)($,{collapsible:!0,collapsedWidth:"50",theme:"light",collapsed:c,onCollapse:function(e,t){r(e)},style:{height:"100vh"},children:[Object(A.jsx)("div",{className:"logo-container",children:Object(A.jsx)("img",{className:c?"logo-small":"logo-large",src:c?"/img/o-logo.png":"/img/black-logo.png",alt:""})}),Object(A.jsxs)(M.a,{style:{marginTop:10},mode:"inline",defaultSelectedKeys:[i],children:[Object(A.jsx)(B.a,{orientation:"left",children:c?Object(A.jsx)(K.a,{}):Object(A.jsxs)(V.b,{children:[Object(A.jsx)(J.a,{})," Core"]})}),l.map((function(e){return Object(A.jsx)(M.a.Item,{icon:e.icon,children:Object(A.jsx)(j.b,{to:e.to,children:e.name})},e.key)})),Object(A.jsx)(B.a,{orientation:"left",children:c?Object(A.jsx)(W.a,{}):Object(A.jsxs)(V.b,{children:[" ",Object(A.jsx)(Y.a,{})," Plugins"," "]})}),s.map((function(e){return Object(A.jsx)(M.a.Item,{icon:e.icon,children:Object(A.jsx)(j.b,{to:e.to,children:e.name})},e.key)}))]}),Object(A.jsx)(B.a,{orientation:"left",children:c?Object(A.jsx)(Z.a,{}):Object(A.jsxs)(V.b,{children:[Object(A.jsx)(Q.a,{})," General"]})}),Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"start"},children:[Object(A.jsx)(f.a,{type:"link",onClick:function(){window.open("http://localhost:3002/admin/api-docs/","_blank").focus()},children:c?Object(A.jsx)("b",{children:"API"}):"Api Documentation"}),Object(A.jsx)(f.a,{type:"link",onClick:function(){localStorage.clear(),window.location.replace("/admin-ui")},children:c?Object(A.jsx)(X.a,{}):"Logout"})]})]})},ce=n(20),ae=n(264),re=n(494),ie=n(497),le=n(135),se=n(74),oe=n(484),ue=n(267),je=n(269);!function(e){e.string="string",e.number="number",e.boolean="boolean",e.ref="ref",e.date="date",e.array="array",e.object="object",e.enums="enums",e.file="file",e.json="json"}(ee||(ee={})),function(e){e.hasOne="hasone",e.hasMany="hasmany",e.none="none"}(te||(te={}));var de=function(e){var t=e.type;return t=t.toLowerCase(),Object(A.jsx)("div",{children:Object(A.jsx)(ae.a,{color:function(){switch(t){case ee.string:return"#f50";case ee.number:return"#d4b106";case ee.boolean:return"#52c41a";case ee.ref:return"#13c2c2";case ee.date:return"#1890ff";case ee.file:return"#2f54eb";case ee.json:return"#531dab";default:return"#8c8c8c"}}(),style:{fontWeight:"bold"},children:function(){switch(t){case ee.string:return"Abc";case ee.number:return"123";case ee.boolean:return"true";case ee.ref:return"Relation";case ee.date:return"17 Aug";case ee.file:return"File";case ee.json:return"JSON";default:return"NA"}}()})})},be=n(73),he=n(492),fe=n(149),Oe=n(266),pe=n(493),xe=n(489).a.Text;function me(e){var t=e.message,n=void 0===t?"This field is required":t;return Object(A.jsx)(xe,{type:"danger",style:{fontSize:12},strong:!0,children:n})}var ge=function(e){var t=e.collections,n=e.isModalVisible,c=e.setIsModalVisible,i=e.edit,l=e.selectedCollection,s=Object(a.useState)(l?l.name:""),u=Object(R.a)(s,2),j=u[0],d=u[1],b=Object(a.useState)(!0),h=Object(R.a)(b,2),O=h[0],p=h[1],g=Object(a.useState)(l?l.operations:{list:!0,create:!0,read:!0,update:!0,delete:!0,deleteAll:!0}),v=Object(R.a)(g,2),C=v[0],w=v[1],S=Object(a.useRef)(),T=Object(o.c)(),I=r.a.useCallback((function(e){return T(function(e){var t={type:y,collection:e};return function(){var n=Object(m.a)(x.a.mark((function n(c){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z(e);case 2:c(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[T]),F=r.a.useCallback((function(e){return T(L(e))}),[T]),q=r.a.useCallback((function(e){return T(N(e))}),[T]),E=function(){if(0!==j.length){if(i){var e=Object(ce.a)(Object(ce.a)({},l),{},{name:j,show:O,operations:C});q(e),F(e)}else{if(t.find((function(e){return e.name===j})))return void k.b.error("Collection already exists");var n={id:Object(pe.a)(),name:j,schema:{},fields:0,show:O,operations:C,publicMethods:{list:!1,create:!1,read:!1,update:!1,delete:!1,deleteAll:!1},x:300*Math.floor(t.length%4)+20,y:60*(Math.floor(t.length/4)+1)};I(n),F(n),d("")}c(!1)}};return Object(a.useEffect)((function(){S.current&&S.current.focus()}),[]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(f.a,{className:"button-blue",onClick:function(){c(!0)},children:i?"Edit":"Create New"}),Object(A.jsx)(he.a,{title:Object(A.jsxs)("span",{children:[" ",Object(A.jsx)(Oe.a,{})," Create new collection"]}),visible:n,onOk:E,onCancel:function(){c(!1)},children:Object(A.jsxs)(V.b,{direction:"vertical",children:[Object(A.jsx)(re.a,{ref:S,placeholder:"Collection Name",value:j,onChange:function(e){var t=e.target.value;/[^a-zA-Z]/.test(t)||d(t)},onKeyDown:function(e){"Enter"===e.key&&E()}}),0===j.length&&Object(A.jsx)(me,{}),Object(A.jsxs)(fe.a,{onChange:function(){return p(!O)},value:O,checked:O,children:[" ",Object(A.jsx)("b",{children:"Show on data flow ?"})]}),Object(A.jsx)(ae.a,{color:"geekblue",children:"Allowed Operations"}),Object(A.jsx)("div",{children:Object.keys(C).map((function(e){return Object(A.jsxs)(fe.a,{onChange:function(){return w(Object(ce.a)(Object(ce.a)({},C),{},Object(be.a)({},e,!C[e])))},checked:C[e],value:C[e],children:[" ",Object(A.jsx)("b",{children:e})]})}))})]})})]})},ye=n(181),ve=n(496);var Ce=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))};return Object(A.jsx)(A.Fragment,{children:"boolean"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%"},children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",onChange:function(e){return c("name",e.target.value)},defaultValue:t.name}),Object(A.jsx)("span",{children:"Default value"}),Object(A.jsx)(ve.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.default,onChange:function(e){return c("default",e)}}),Object(A.jsx)("span",{children:"Required"}),Object(A.jsx)(ve.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return c("required",e)}})]})})},we=n(490),ke={index:!1,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1};var Se=function(e){var t=e.state,n=e.setState,c=Object(a.useState)([]),r=Object(R.a)(c,2),i=r[0],l=r[1],s=function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))};return Object(a.useEffect)((function(){var e=Object.keys(t).filter((function(e){return Object.keys(ke).includes(e)&&function(e){return function(t){return t[e]}}(e)(t)}));l(e)}),[t]),Object(A.jsx)(A.Fragment,{children:"number"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%"},children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",onChange:function(e){return s("name",e.target.value)}}),Object(A.jsx)("span",{children:"Default value"}),Object(A.jsx)(we.a,{min:1,max:10,onChange:function(e){return s("default",e)},placeholder:"10",style:{width:"100%"}}),Object(A.jsx)("span",{children:"Settings"}),Object(A.jsx)(fe.a.Group,{style:{width:"100%"},onChange:function(e){var t={index:!1,required:!1,unique:!1};n((function(n){return Object.keys(t).forEach((function(n){e.includes(n)&&(t[n]=!0)})),Object(ce.a)(Object(ce.a)({},n),t)})),l(e)},value:i,children:Object(A.jsxs)(V.b,{direction:"vertical",children:[Object(A.jsx)(fe.a,{value:"required",children:"Required"}),Object(A.jsx)(fe.a,{value:"index",children:"Index"}),Object(A.jsx)(fe.a,{value:"unique",children:"Unique"}),Object(A.jsx)("h4",{children:"Minimum Length"}),Object(A.jsx)(we.a,{min:0,value:t.minLength||0,onChange:function(e){return s("minLength",e)}}),Object(A.jsx)("h4",{children:"Maximum Length"}),Object(A.jsx)(we.a,{min:0,value:t.maxLength||0,onChange:function(e){return s("maxLength",e)}})]})})]})})};var Te=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))},a=Object(o.d)((function(e){return e.collections}),o.b);return Object(A.jsx)(A.Fragment,{children:"ref"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return c("name",e.target.value)}}),Object(A.jsx)(me,{}),Object(A.jsx)("span",{children:"Relationship"}),Object(A.jsxs)(ye.a.Group,{value:t.relationship,onChange:function(e){return c("relationship",e.target.value)},children:[Object(A.jsx)(ye.a.Button,{value:te.hasMany,children:"Has Many"}),Object(A.jsx)(ye.a.Button,{value:te.hasOne,children:"Has One"})]}),Object(A.jsx)("span",{children:"Auto Populate"}),Object(A.jsxs)(ye.a.Group,{onChange:function(e){return c("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(A.jsx)(ye.a,{value:!0,children:"True"}),Object(A.jsx)(ye.a,{value:!1,children:"False"})]}),Object(A.jsx)("span",{children:"Required"}),Object(A.jsx)(ve.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return c("required",e)}}),Object(A.jsx)("span",{children:"Ref"}),Object(A.jsx)(ye.a.Group,{value:t.ref,onChange:function(e){return c("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:a.map((function(e,t){var n=e.name;return Object(A.jsx)(ye.a.Button,{value:n,style:{textTransform:"capitalize"},children:n},t)}))})]})})},ze=re.a.TextArea,Ie={index:!1,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1};var Fe=function(e){var t=e.state,n=e.setState,c=Object(a.useState)([]),r=Object(R.a)(c,2),i=r[0],l=r[1],s=Object(a.useState)(""),o=Object(R.a)(s,2),u=o[0],j=o[1],d=function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))};return Object(a.useEffect)((function(){var e=Object.keys(t).filter((function(e){return Object.keys(Ie).includes(e)&&function(e){return function(t){return t[e]}}(e)(t)}));l(e),t.enum.length&&j(t.enum.join("\n"))}),[t]),Object(A.jsx)(A.Fragment,{children:"string"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",onChange:function(e){return d("name",e.target.value)},value:t.name}),Object(A.jsx)(me,{}),Object(A.jsx)("span",{children:"Default value"}),Object(A.jsx)(re.a,{onChange:function(e){return d("default",e.target.value)},value:t.default,placeholder:"Keep empty for not setting the value"}),Object(A.jsx)("span",{children:"Enums"}),Object(A.jsx)(ze,{showCount:!0,maxLength:100,style:{width:"100%"},value:u,placeholder:"Keep empty for not setting the value",onChange:function(e){j(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d("enum",u.trim().split("\n"))}}),Object(A.jsx)("span",{children:"Settings"}),Object(A.jsx)(fe.a.Group,{style:{width:"100%",height:"100%"},onChange:function(e){n((function(t){return e.includes("maxLength")||(t.maxLength=0),e.includes("minLength")||(t.minLength=0),Object.keys(Ie).forEach((function(t){["maxLength","minLength"].includes(t)||(Ie[t]=e.includes(t))})),Object(ce.a)(Object(ce.a)({},t),Ie)})),l(e)},value:i,children:Object(A.jsxs)(le.a,{children:[Object(A.jsxs)(se.a,{lg:12,className:"d-flex-col",children:[Object(A.jsx)(fe.a,{value:"required",children:"Required"}),Object(A.jsx)(fe.a,{value:"index",children:"Index"}),Object(A.jsx)(fe.a,{value:"unique",children:"Unique"}),Object(A.jsx)(fe.a,{value:"lowercase",disabled:i.includes("uppercase"),children:"Lowercase"}),Object(A.jsx)(fe.a,{value:"uppercase",disabled:i.includes("lowercase"),children:"Uppercase"})]}),Object(A.jsxs)(se.a,{lg:12,className:"d-flex-col",children:[Object(A.jsx)(fe.a,{value:"trim",children:"Trim"}),Object(A.jsx)("h4",{children:"Minimum Length"}),Object(A.jsx)(we.a,{min:0,value:t.minLength||0,onChange:function(e){return d("minLength",e)}}),Object(A.jsx)("h4",{children:"Maximum Length"}),Object(A.jsx)(we.a,{min:0,value:t.maxLength||0,onChange:function(e){return d("maxLength",e)}})]})]})})]})})},Le=n(481);var Ne=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))};return Object(A.jsx)(A.Fragment,{children:"date"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%"},children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",onChange:function(e){return c("name",e.target.value)}}),Object(A.jsx)("span",{children:"Default value"}),Object(A.jsx)(Le.a,{onChange:function(e){return c("default",e)}})]})})};var qe=function(e){var t=e.state,n=e.setState,c=function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))};return Object(A.jsx)(A.Fragment,{children:"file"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return c("name",e.target.value)}}),Object(A.jsx)(me,{}),Object(A.jsx)("span",{children:"Relationship"}),Object(A.jsxs)(ye.a.Group,{value:t.relationship,onChange:function(e){return c("relationship",e.target.value)},children:[Object(A.jsx)(ye.a.Button,{value:te.hasMany,children:"Has Many"}),Object(A.jsx)(ye.a.Button,{value:te.hasOne,children:"Has One"})]}),Object(A.jsx)("span",{children:"Auto Populate"}),Object(A.jsxs)(ye.a.Group,{onChange:function(e){return c("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(A.jsx)(ye.a,{value:!0,children:"True"}),Object(A.jsx)(ye.a,{value:!1,children:"False"})]}),Object(A.jsx)("span",{children:"Required"}),Object(A.jsx)(ve.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return c("required",e)}}),Object(A.jsx)("span",{children:"Ref"}),Object(A.jsx)(ye.a.Group,{value:t.ref,onChange:function(e){return c("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:Object(A.jsx)(ye.a.Button,{value:"file",style:{textTransform:"capitalize"},children:"File"})})]})})};var Ee=function(e){var t=e.state,n=e.setState;return Object(A.jsx)("div",{children:"json"===t.type&&Object(A.jsxs)(V.b,{direction:"vertical",children:[Object(A.jsx)("span",{children:"Name for the type"}),Object(A.jsx)(re.a,{placeholder:"Type Name",onChange:function(e){return function(e,t){var c={};c[e]=t,n((function(e){return Object(ce.a)(Object(ce.a)({},e),c)}))}("name",e.target.value)}}),Object(A.jsx)(me,{})]})})};var Ae=function(e){var t=e.selectedCollection,n=e.editSchema,c=Object(a.useState)(!1),i=Object(R.a)(c,2),l=i[0],s=i[1],u=Object(a.useState)({name:"",type:ee.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,enum:[],ref:"none",relationship:te.hasMany,autopopulate:!0}),j=Object(R.a)(u,2),d=j[0],b=j[1],h=Object(o.c)(),O=r.a.useCallback((function(e){return h(N(e))}),[h]),p=function(){s(!1)};Object(a.useEffect)((function(){l||b({name:"",type:ee.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,ref:"none",relationship:te.hasMany,enum:[],autopopulate:!0})}),[l]),Object(a.useEffect)((function(){n&&(b(n),s(!0))}),[n]);var x=Object(A.jsx)(f.a,{type:"primary",onClick:function(){var e=Object(ce.a)({},t.schema);if(n||!e[d.name]){e[d.name]=d;var c=Object(ce.a)(Object(ce.a)({},t),{},{schema:e,fields:Object.keys(e).length});O(c),p()}else k.b.error("Type already exist")},disabled:0===d.name.length,children:"Save"});return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(f.a,{type:"primary",onClick:function(){s(!0)},style:{width:"100%",height:50,textTransform:"uppercase",fontWeight:"bold"},children:"Add New Field"}),Object(A.jsxs)(he.a,{title:Object(A.jsxs)(V.b,{children:[" ",Object(A.jsx)(Oe.a,{}),Object(A.jsxs)(ye.a.Group,{onChange:function(e){b((function(t){return Object(ce.a)(Object(ce.a)({},t),{},{type:e.target.value})}))},value:d.type,children:[Object(A.jsx)(ye.a.Button,{value:ee.string,children:"String"}),Object(A.jsx)(ye.a.Button,{value:ee.boolean,children:"Boolean"}),Object(A.jsx)(ye.a.Button,{value:ee.number,children:"Number"}),Object(A.jsx)(ye.a.Button,{value:ee.ref,children:"Ref"}),Object(A.jsx)(ye.a.Button,{value:ee.date,children:"Date"}),Object(A.jsx)(ye.a.Button,{value:ee.file,children:"File"}),Object(A.jsx)(ye.a.Button,{value:ee.json,children:"JSON"})]})]}),visible:l,onOk:p,onCancel:function(){s(!1)},footer:x,width:800,children:[Object(A.jsx)(Fe,{state:d,setState:b}),Object(A.jsx)(Ce,{state:d,setState:b}),Object(A.jsx)(Se,{state:d,setState:b}),Object(A.jsx)(Te,{state:d,setState:b}),Object(A.jsx)(Ne,{state:d,setState:b}),Object(A.jsx)(qe,{state:d,setState:b}),Object(A.jsx)(Ee,{state:d,setState:b})]})]})},De=n(106),Re=he.a.confirm;var Me=function(e){var t=e.removeCollectionType,n=e.collection,c=e.key;return Re({title:"Sure you want to delete type?",icon:Object(A.jsx)(De.a,{}),content:null,onOk:function(){!function(){var e=n.schema;delete e[c],n.schema=e,n.fields=n.fields-1,t(n)}()},onCancel:function(){console.log("Cancel")}})},Be=he.a.confirm;var Ve=function(e){var t=e.collection,n=e.deleteCollectionAction;return Be({title:"Sure you want to delete this collection?",icon:Object(A.jsx)(De.a,{}),content:null,onOk:function(){n(t),k.b.success("Collection removed")},onCancel:function(){console.log("Cancel")}})},_e=b.a.Sider,Pe=b.a.Content;var Ge=function(){var e=Object(a.useState)(),t=Object(R.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),l=Object(R.a)(i,2),s=l[0],u=l[1],j=Object(a.useState)(!1),d=Object(R.a)(j,2),h=d[0],O=d[1],p=Object(o.d)((function(e){return e.collections})),g=Object(a.useState)([]),y=Object(R.a)(g,2),C=y[0],w=y[1],S=Object(o.d)((function(e){return e.selectedCollection}),o.b),T=Object(o.c)(),z=r.a.useCallback((function(e){return T(L(e))}),[T]),F=r.a.useCallback((function(e){return T(N(e))}),[T]),q=r.a.useCallback((function(e){return T(N(e))}),[T]),D=r.a.useCallback((function(e){return T(function(e){var t={type:v,collection:e};return function(){var n=Object(m.a)(x.a.mark((function n(c){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e);case 2:c(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[T]);return Object(a.useEffect)((function(){!S&&p.length&&z(p[0]),w(p)}),[p]),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(b.a,{style:{height:"100%"},children:[Object(A.jsxs)(_e,{width:"400",theme:"light",style:{backgroundColor:"transparent"},children:[Object(A.jsx)(E.a,{title:"Collection List",extra:[Object(A.jsxs)(ae.a,{color:"green",children:["Total ",p.length]}),Object(A.jsx)(ge,{collections:p,isModalVisible:s,setIsModalVisible:u})]}),Object(A.jsx)("div",{style:{padding:10},children:Object(A.jsx)(re.a,{size:"large",placeholder:"Search Collection",onChange:function(e){var t=[];e.target.value.length?(t=p.filter((function(t){return t.name.trim().toLowerCase().includes(e.target.value.toLowerCase())})),w(t)):w(p)}})}),Object(A.jsx)(ie.b,{grid:{gutter:10,xs:1,sm:1,md:1,lg:1,xl:1,xxl:1},dataSource:C,style:{padding:10,height:"80vh",overflow:"auto"},renderItem:function(e,t){return Object(A.jsx)(ie.b.Item,{children:Object(A.jsxs)(ae.a,{style:{textTransform:"capitalize",cursor:"pointer",height:55,width:"100%",display:"grid",placeItems:"left",fontSize:"20px",letterSpacing:1.3,padding:10},color:e.name===(null===S||void 0===S?void 0:S.name)?"orange":e.show?"default":"error",onClick:function(){z(e)},children:[e.name,Object(A.jsxs)("span",{style:{fontSize:12},children:[e.fields," fields",Object(A.jsx)("span",{style:{fontSize:12,marginLeft:10},children:e.show?null:"Hidden"})]})]},t)},t)}})]}),S&&Object(A.jsx)(b.a,{style:{backgroundColor:"#fafafb",height:"100%"},children:Object(A.jsxs)(Pe,{children:[Object(A.jsx)(E.a,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:S.name}),extra:S.show?[Object(A.jsxs)(V.b,{children:[Object(A.jsx)(ge,{collections:p,isModalVisible:h,setIsModalVisible:O,edit:!0,selectedCollection:S}),Object(A.jsx)(f.a,{className:"button-green",onClick:function(){q(S),k.b.success("Collection Saved")},children:"Save"}),Object(A.jsx)(f.a,{className:"button-red",onClick:function(){Ve({deleteCollectionAction:D,collection:S})},children:"Delete"})]})]:[Object(A.jsx)(ae.a,{color:"geekblue",children:"Hidden"})]}),Object(A.jsx)(le.a,{children:Object(A.jsxs)(se.a,{span:24,style:{paddingLeft:20},children:[Object(A.jsx)("h5",{children:"Allowed Operations"}),Object.keys(S.operations).map((function(e){return Object(A.jsx)(ae.a,{color:S.operations[e]?"geekblue":"volcano",children:e})}))]})}),Object(A.jsx)(le.a,{children:Object(A.jsx)(se.a,{span:24,style:{padding:20},children:Object(A.jsxs)(oe.a,{bordered:!1,style:{boxShadow:"rgb(227 233 243) 0px 2px 4px"},title:Object(A.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(A.jsxs)("h1",{children:["".concat(S.fields," fields")," "]})}),bodyStyle:{padding:0},children:[Object.keys(S.schema).map((function(e,t){var n=S.schema[e],a=n.type;return Object(A.jsxs)(le.a,{gutter:0,style:{height:60,padding:15,borderBottom:"1px solid #f0f0f0"},align:"middle",children:[Object(A.jsx)(se.a,{span:6,children:Object(A.jsx)(de,{type:a})}),Object(A.jsxs)(se.a,{span:6,children:[Object(A.jsx)("span",{style:{fontSize:15,color:"#141414",fontWeight:500},children:e})," "]}),Object(A.jsxs)(se.a,{span:6,children:[Object(A.jsx)("span",{style:{fontSize:15,color:"#141414",textTransform:"capitalize"},children:a})," "]}),Object(A.jsx)(se.a,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:S.show&&Object(A.jsxs)(V.b,{size:25,children:[Object(A.jsx)(ue.a,{style:{color:"#8c8c8c",fontSize:20},onClick:function(){return c(Object(ce.a)(Object(ce.a)({},n),{},{name:e}))}}),Object(A.jsx)(je.a,{style:{color:"#cf1322",fontSize:20},className:"pointer",onClick:function(){return Me({removeCollectionType:F,collection:S,key:e})}})]})})]},t)})),S.show&&Object(A.jsx)(Ae,{selectedCollection:S,editSchema:n})]})})})]})})]})})},Ue=n(148),He=n(265),Ke=n(510),Je=n(270);var We=function(e){var t=e.collection,n=Object.keys(t.schema).map((function(e,n){return{key:n,field:e,type:t.schema[e].type}})),c=Object(a.useState)(!0),r=Object(R.a)(c,2),i=r[0],l=r[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("h2",{style:{backgroundColor:"#1890ff",textTransform:"capitalize",padding:10,color:"white",letterSpacing:1.5,display:"flex",justifyContent:"space-between",margin:0},children:[t.name,Object(A.jsxs)("span",{style:{cursor:i?"zoom-out":"zoom-in"},onClick:function(){return l(!i)},children:[" ",i?Object(A.jsx)(Je.a,{}):Object(A.jsx)(Ke.a,{})," "]})]}),i&&Object(A.jsx)("table",{style:{width:"100%",transition:"5s"},children:n.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{style:{paddingLeft:8,textAlign:"left",fontSize:16,letterSpacing:1.2},children:e.field}),Object(A.jsx)("td",{style:{paddingRight:8,textAlign:"right",fontSize:14,letterSpacing:1.2,color:"#8c8c8c"},children:e.type})]},e.key)}))})]})},Ye=function(){var e=Object(o.d)((function(e){return e.collections})),t=Object(a.useState)([]),n=Object(R.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([0,0]),l=Object(R.a)(i,2),s=l[0],u=l[1],j=function(){var t=[];e.forEach((function(e,n){t.push({id:e.name,data:{label:Object(A.jsx)("div",{children:Object(A.jsx)(We,{collection:e})})},style:{padding:0,width:"300px",borderColor:"#40a9ff",borderRadius:0},position:{x:e.x,y:e.y}}),t.push.apply(t,Object(Ue.a)(function(e,t,n){var c=[];return Object.keys(e).forEach((function(a,r){e[a].type===ee.ref&&c.push({id:"e1-".concat(n,"-").concat(r,"-").concat(a),source:t,target:e[a].ref,type:"smoothstep",label:"".concat(t," ").concat(e[a].relationship," ").concat(e[a].ref),animated:!1,labelStyle:{textTransform:"lowercase",fontSize:20,letterSpacing:1.2,backgroundColor:"#ff9c6e"},style:{width:"100%",padding:20,borderRadius:5}})})),c}(e.schema,e.name,e.id)))})),r(t)};Object(a.useEffect)((function(){j(),e.length&&(u([parseInt(e[0].x.toString()),parseInt(e[0].y.toString())]),console.log(s))}),[e]);var d=function(){var t=Object(m.a)(x.a.mark((function t(n,c,a){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.find((function(e){return e.name===n}))){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.x=c,r.y=a,t.next=8,z(r);case 8:console.log("Node Position Updated"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n,c){return t.apply(this,arguments)}}();return Object(A.jsx)("div",{style:{width:"100%",height:"100vh",overflow:"auto"},children:Object(A.jsx)(He.a,{defaultPosition:s,elements:c,minZoom:.4,defaultZoom:1,snapToGrid:!0,snapGrid:[15,15],onlyRenderVisibleElements:!0,onNodeDragStop:function(e,t){d(t.id,t.position.x,t.position.y)}})})},Ze=n(482),Qe=n(177),Xe=n(486),$e=n(511),et=n(256),tt=n.n(et),nt=n(147),ct=n(485),at=n(68),rt=n.n(at),it=nt.a.Option;var lt=function(e){var t=e.schemaValue,n=e.action,r=e.selectedRecord,i=Object(a.useState)([]),l=Object(R.a)(i,2),s=l[0],o=l[1],u=Object(a.useState)(""),j=Object(R.a)(u,2),d=j[0],b=j[1],h=Object(a.useState)([]),f=Object(R.a)(h,2),O=f[0],p=f[1],g=Object(a.useState)([]),y=Object(R.a)(g,2),v=y[0],C=y[1],w=function(){var e=Object(m.a)(x.a.mark((function e(){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={model:t.ref,operations:c.ref,data:{query:{search:d}}},e.next=4,F(n);case 4:a=e.sent,r=a.data,o(r.list),p(r.searchValues),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=s.map((function(e){return Object(A.jsx)(it,{value:e._id,children:O.map((function(t){var n;return(null===(n=e[t])||void 0===n?void 0:n.length)?"".concat(e[t]):e._id}))})}));return Object(a.useEffect)((function(){w()}),[d]),Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],initialValue:"update"===n&&r[t.name]?Array.isArray(r[t.name])?r[t.name].map((function(e){return e._id||e})):[r[t.name]._id]:"",children:Object(A.jsx)(nt.a,{showSearch:!0,value:v,placeholder:"Search anything in ".concat(t.name),defaultActiveFirstOption:!0,showArrow:!1,filterOption:!1,onSearch:function(e){return b(e)},onChange:function(e){return C(e)},notFoundContent:null,mode:"hasmany"===t.relationship?"multiple":void 0,children:k})})},st=n(483),ot=n(491),ut=n(179),jt=n(512),dt=n(176),bt=n.n(dt),ht=n(257),ft=he.a.confirm,Ot=st.a.Dragger;var pt=function(e){var t=e.setCustomFiles,n=e.deleteButton,r=e.filterButton,i="file",l=Object(a.useState)([]),s=Object(R.a)(l,2),o=s[0],u=s[1],j=Object(a.useState)([]),d=Object(R.a)(j,2),b=d[0],h=d[1],O=Object(a.useState)(!0),p=Object(R.a)(O,2),g=p[0],y=p[1],v=Object(a.useState)(!1),C=Object(R.a)(v,2),w=C[0],S=C[1],T=Object(a.useState)({current:1,pageSize:10}),z=Object(R.a)(T,2),I=z[0],L=z[1];Object(a.useEffect)((function(){"function"===typeof t&&t(Object(Ue.a)(b))}),[b]);var N={multiple:!0,name:"manual",action:"/admin/file/manual",defaultFileList:[],onChange:function(e){var t=e.file.status;"done"===t?k.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&k.b.error("".concat(e.file.name," file upload failed.")),e.fileList=[]},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},q=function(){var e=Object(m.a)(x.a.mark((function e(t,n){var a,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,a={model:t,operations:c.list,data:{query:{pagination:n}}},e.next=5,F(a);case 5:r=e.sent,i=r.data,L(i.pagination),u(i.list),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:y(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,t={model:i,operations:c.deleteAll,data:{id:b}},e.next=5,F(t);case 5:k.b.success("Records Deleted"),h([]),q(i,I),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:y(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q(i,I)}),[]),Object(A.jsx)(A.Fragment,{children:g?Object(A.jsx)("div",{style:{padding:20},children:Object(A.jsx)(ot.a,{active:!0})}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{style:{marginTop:2},ghost:!0,title:Object(A.jsxs)(V.b,{children:[(null===I||void 0===I?void 0:I.total)>0&&Object(A.jsxs)(ae.a,{color:"green",children:["Total ",I.total]}),Object(A.jsxs)(ae.a,{color:"blue",children:["Selected ",b.length]})]}),extra:[b.length&&n?Object(A.jsxs)(f.a,{onClick:function(){return ft({title:"Sure you want to delete selected records?",icon:Object(A.jsx)(De.a,{}),content:null,onOk:function(){D()},onCancel:function(){console.log("Cancel")}})},children:[Object(A.jsx)(je.a,{}),"Delete"]}):null,r&&Object(A.jsxs)(f.a,{children:[Object(A.jsx)($e.a,{}),"Filter"]},"2"),Object(A.jsxs)(f.a,{type:"primary",onClick:function(){S(!0)},children:[Object(A.jsx)(Oe.a,{}),"Upload"]},"1")]}),Object(A.jsx)("div",{className:"grid-responsive",children:o.map((function(e){return Object(A.jsxs)("div",{className:"on-hover",style:{border:b.includes(e._id)?"1px solid #40a9ff":"none",backgroundColor:"white"},children:[Object(A.jsx)(fe.a,{style:{padding:10,position:"absolute",zIndex:99},onChange:function(){h((function(t){var n=Object(Ue.a)(t);return n.includes(e._id)?n=n.filter((function(t){return t!==e._id})):n.push(e._id),n}))}}),Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(A.jsx)(Xe.a,{preview:!1,width:200,height:200,src:"/admin/file/get/"+e.filename,fallback:"/img/file.svg"})}),Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:10},children:[Object(A.jsx)("b",{children:e.originalname}),Object(A.jsxs)("span",{style:{color:"GrayText",display:"flex",justifyContent:"space-between"},children:[bt()(e.size)," ",e.mimetype]})]}),Object(A.jsx)(f.a,{style:{float:"right",margin:5},onClick:function(){window.open(ht.proxy+"/admin/file/get/"+e.filename).focus()},children:"Open"})]},e._id)}))}),Object(A.jsx)(ut.a,{style:{textAlign:"right",margin:10},current:I.current,pageSize:I.pageSize,total:I.total,onChange:function(e,t){var n={current:e,pageSize:t,total:I.total};q(i,n)}}),Object(A.jsx)(he.a,{title:"Upload File",visible:w,onOk:function(){q(i,I),S(!1)},onCancel:function(){return S(!1)},destroyOnClose:!0,children:Object(A.jsxs)(Ot,Object(ce.a)(Object(ce.a)({},N),{},{className:"upload-list-inline",children:[Object(A.jsx)("p",{className:"ant-upload-drag-icon",children:Object(A.jsx)(jt.a,{})}),Object(A.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(A.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))})]})})};var xt=function(e){var t=e.schemaValue,n=e.form,c=Object(a.useState)([]),r=Object(R.a)(c,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){n.setFieldsValue(Object(be.a)({},t.name,i))}),[i]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(A.jsx)("div",{children:Object(A.jsx)(pt,{setCustomFiles:l})})})})},mt=n(260),gt=n(258),yt=n.n(gt);var vt=function(e){var t=e.schemaValue,n=e.form,c=e.action,r=e.selectedRecord,i=Object(a.useState)("update"===c&&r[t.name]?r[t.name]:null),l=Object(R.a)(i,2),s=l[0],o=l[1];return Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(A.jsx)("div",{style:{border:"1px solid #161f59",borderRadius:1},children:Object(A.jsx)(mt.a,{theme:"dark_mitsuketa_tribute",locale:yt.a,placeholder:s,onChange:function(e){n.setFieldsValue(Object(be.a)({},t.name,Object(ce.a)({},e.jsObject))),o(e.jsObject)},height:"550px",width:"100%"})})})},Ct=nt.a.Option;var wt=function(e){var t=e.selectedCollection,n=e.action,a=void 0===n?"create":n,r=e.id,i=e.selectedRecord,l=null===t||void 0===t?void 0:t.schema,s=ct.a.useForm(),o=Object(R.a)(s,1)[0],u=function(){var e=Object(m.a)(x.a.mark((function e(n){var i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={model:(null===t||void 0===t?void 0:t.name)||"",operations:"create"===a?c.create:c.update,data:{body:n,id:r}},e.next=4,F(i);case 4:k.b.success("Data Saved"),window.history.back(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),k.b.error(e.t0.response.data),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{children:[Object(A.jsx)(E.a,{onBack:function(){return window.history.back()},title:"create"===a?"Create New":"Edit"}),Object(A.jsx)(oe.a,{style:{marginLeft:10,marginRight:10},title:Object(A.jsx)("span",{style:{letterSpacing:1.2,textTransform:"capitalize"},children:null===t||void 0===t?void 0:t.name}),children:Object(A.jsxs)(ct.a,{name:"basic",onFinish:function(e){u(e)},onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",size:"large",form:o,children:[l&&Object.keys(l).map((function(e){var t,n=function(e){return function(t){return t[e]}}(e)(l);switch(console.log(n),n.type){case"string":return Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required,enum:["male","female"]}],initialValue:"update"===a?i[n.name]:"",children:n.enum.length?Object(A.jsx)(nt.a,{placeholder:"Select ".concat(n.name),children:Object(A.jsx)(A.Fragment,{children:n.enum.map((function(e){return Object(A.jsx)(Ct,{value:e,children:e})}))})}):Object(A.jsx)(re.a,{})});case"number":return Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===a?i[n.name]:"",children:Object(A.jsx)(we.a,{style:{width:300}})});case"date":return Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===a?rt()(i[n.name]):rt()(),children:Object(A.jsx)(Le.a,{})});case"boolean":return Object(A.jsx)(ct.a.Item,{label:Object(A.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===a?null===(t=i[n.name])||void 0===t?void 0:t.toString():"false",children:Object(A.jsxs)(nt.a,{placeholder:"Select",children:[Object(A.jsx)(Ct,{value:"true",children:"True"}),Object(A.jsx)(Ct,{value:"false",children:"False"})]})});case"ref":return Object(A.jsx)(lt,{action:a,selectedRecord:i,schemaValue:n});case"file":return Object(A.jsx)(xt,{schemaValue:n,form:o});case"json":return Object(A.jsx)(vt,{action:a,selectedRecord:i,schemaValue:n,form:o});default:return null}})),Object(A.jsx)(ct.a.Item,{children:Object(A.jsx)(f.a,{type:"primary",htmlType:"submit",children:"create"===a?"Save":"Update"})})]})})]})},kt=n(208),St=n.n(kt);var Tt=function e(t){return t=t.data,Object(A.jsx)("div",{style:{borderLeft:"6px solid #1890ff",border:"1px dotted #1890ff",padding:10,margin:2,width:"100%"},children:"string"===typeof t?t:Object.keys(t).map((function(n){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(V.b,{direction:"vertical",children:[Object(A.jsx)(St.a,{style:{textTransform:"capitalize"},type:"secondary",children:n}),Object(A.jsx)("p",{children:"object"===typeof t[n]?Object(A.jsx)(e,{data:t[n]}):t[n]})]}),Object(A.jsx)("br",{})]})}))})},zt=function(e){var t=e.selectedCollection,n=(e.action,e.id,e.selectedRecord);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{onBack:function(){return window.history.back()},title:t.name,style:{textTransform:"capitalize"},ghost:!1}),Object(A.jsx)(oe.a,{style:{margin:10},children:Object(A.jsx)("div",{children:Object.keys(n).map((function(e){return console.log(n[e]),"key"!==e&&Object(A.jsxs)("div",{children:[Object(A.jsxs)(V.b,{direction:"vertical",style:{width:"100%"},children:[Object(A.jsx)(St.a,{style:{textTransform:"capitalize"},type:"secondary",children:e}),Object(A.jsx)("p",{children:Array.isArray(n[e])?n[e].map((function(e){return Object(A.jsx)(Tt,{data:e})})):"object"===typeof n[e]?Object(A.jsx)(Tt,{data:n[e]}):n[e].toString()})]}),Object(A.jsx)("br",{})]})}))})})]})},It=n(132),Ft=n(513),Lt=Ze.a.Column,Nt=he.a.confirm;var qt=function(){var e=Object(d.h)().collection,t=Object(d.f)(),n=tt.a.parse(window.location.href.split("?")[1]),r=Object(a.useState)([]),i=Object(R.a)(r,2),l=i[0],s=i[1],u=Object(a.useState)([]),j=Object(R.a)(u,2),b=j[0],h=j[1],O=Object(a.useState)({}),p=Object(R.a)(O,2),g=p[0],y=p[1],v=Object(a.useState)(!0),C=Object(R.a)(v,2),w=C[0],S=C[1],T=Object(a.useState)([]),z=Object(R.a)(T,2),I=z[0],N=z[1],q=Object(a.useState)({current:1,pageSize:10}),D=Object(R.a)(q,2),B=D[0],_=D[1],P=Object(o.c)(),G=Object(o.d)((function(e){return e.selectedCollection}),o.b),U=Object(a.useCallback)((function(e){return P(L(e))}),[P]),H=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})),K=function(){var e=Object(m.a)(x.a.mark((function e(t,n){var a,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,a={model:t,operations:c.list,data:{query:{pagination:n}}},e.next=5,F(a);case 5:r=e.sent,i=r.data,_(i.pagination),s(i.list),h(i.column),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:S(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var t=Object(m.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.prev=1,a={model:e,operations:c.delete,data:{id:n}},t.next=5,F(a);case 5:k.b.success("Record Deleted"),K(e,B),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:S(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=Object(m.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.prev=1,n={model:e,operations:c.deleteAll,data:{id:I}},t.next=5,F(n);case 5:k.b.success("Records Deleted"),N([]),K(e,B),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:S(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){e&&0===Object.keys(n).length&&(h([]),s([]),K(e,B)),G||t.push("/data")}),[e,G,window.location.href]);var Y=l?l.map((function(e,t){return Object(ce.a)({key:t},e)})):[],Z=b?b.map((function(e){var t=e.name,n=e.type,c=e.file;return{title:t.toString(),dataIndex:t.toString(),key:t.toString(),type:n,file:c}})):[];return Z.push({title:"Action",key:"operation",fixed:"right",width:50,type:"operation"}),e?n.action&&"create"===n.action&&G?Object(A.jsx)(wt,{selectedCollection:G,action:"create"}):n.action&&"update"===n.action&&G?Object(A.jsx)(wt,{selectedCollection:G,action:"update",id:n.id,selectedRecord:g}):n.action&&"show"===n.action&&G?Object(A.jsx)(zt,{selectedCollection:G,action:"show",id:n.id,selectedRecord:g}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{style:{marginTop:2},ghost:!1,onBack:function(){return window.history.back()},title:Object(A.jsxs)(V.b,{children:[Object(A.jsxs)("span",{style:{textTransform:"capitalize"},children:[e," "]}),(null===B||void 0===B?void 0:B.total)&&Object(A.jsx)(ae.a,{color:"geekblue",children:B.total})]}),extra:[I.length?Object(A.jsxs)(f.a,{onClick:function(){return Nt({title:"Sure you want to delete selected records?",icon:Object(A.jsx)(De.a,{}),content:null,onOk:function(){W()},onCancel:function(){console.log("Cancel")}})},children:[Object(A.jsx)(je.a,{}),"Delete"]}):null,Object(A.jsxs)(f.a,{children:[Object(A.jsx)($e.a,{}),"Filter"]},"2"),Object(A.jsxs)(f.a,{type:"primary",onClick:function(){t.push("/data/".concat(e,"?action=create"))},children:[Object(A.jsx)(Oe.a,{}),"Create"]},"1")]}),Object(A.jsx)(Ze.a,{loading:w,style:{padding:10},dataSource:Y,size:"middle",rowKey:function(e){return e._id},rowSelection:{selectedRowKeys:I,onChange:function(e){N(e)}},pagination:B,onChange:function(t,n,c){_(t),K(e,t)},children:Z.map((function(n){switch(n.type){case"objectId":return Object(A.jsx)(Lt,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),width:70,dataIndex:n.dataIndex},n.key);case"boolean":return Object(A.jsx)(Lt,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e,t,n){return void 0===e?null:Object(A.jsx)(A.Fragment,{children:e?Object(A.jsx)(ae.a,{color:"green",style:{textTransform:"capitalize"},children:e.toString()}):Object(A.jsx)(ae.a,{color:"red",style:{textTransform:"capitalize"},children:e.toString()})})}},n.key);case"date":return Object(A.jsx)(Lt,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return e?Object(A.jsx)("span",{children:rt()(e).format("MM/DD/YYYY hh:mm")}):null}},n.key);case"mixed":return Object(A.jsx)(Lt,{title:Object(A.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-between"},children:[n.title,Object(A.jsx)(ae.a,{color:"magenta",children:"JSON"})]}),dataIndex:n.dataIndex,render:function(e){return e?Object(A.jsx)("span",{children:Object.keys(e).map((function(e){return Object(A.jsx)(ae.a,{children:e})}))}):null}},n.key);case"operation":return Object(A.jsx)(Lt,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,width:60,render:function(n,c){return Object(A.jsx)(Qe.a,{overlay:Object(A.jsxs)(M.a,{children:[Object(A.jsx)(M.a.Item,{children:Object(A.jsx)(f.a,{style:{width:"100%"},className:"button-blue",icon:Object(A.jsx)(It.a,{}),onClick:function(){y(c),t.push("/data/".concat(e,"?action=show&id=").concat(c._id))},children:"View"})}),Object(A.jsx)(M.a.Item,{children:Object(A.jsx)(f.a,{style:{width:"100%"},className:"button-green",icon:Object(A.jsx)(ue.a,{}),onClick:function(){y(c),t.push("/data/".concat(e,"?action=update&id=").concat(c._id))},children:"Edit"})}),Object(A.jsx)(M.a.Item,{children:Object(A.jsx)(f.a,{icon:Object(A.jsx)(je.a,{}),className:"button-red",onClick:function(){return Nt({title:"Sure you want to delete this record?",icon:Object(A.jsx)(De.a,{}),content:null,onOk:function(){J(c._id)},onCancel:function(){console.log("Cancel")}})},children:"Delete"})})]}),placement:"bottomLeft",children:Object(A.jsx)(Ft.a,{style:{cursor:"pointer",maxHeight:10}})})}},n.key);case"hasone":return Object(A.jsx)(Lt,{title:Object(A.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-between"},children:[n.title,n.file&&Object(A.jsx)(ae.a,{color:"cyan",children:"File"})]}),dataIndex:n.dataIndex,render:function(e){return e&&Object(A.jsx)(V.b,{direction:"vertical",children:n.file?Object(A.jsxs)(V.b,{children:[Object(A.jsx)(Xe.a,{preview:!1,width:100,height:100,src:"/admin/file/get/"+e.filename,fallback:"/img/file.svg"}),Object(A.jsxs)("span",{style:{color:"GrayText",display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[Object(A.jsx)("b",{children:e.originalname}),bt()(e.size)," ",e.mimetype]})]}):"string"===typeof e?Object(A.jsxs)("span",{children:[e.slice(0,200)," "]}):Object.values(e).map((function(e,t){return"string"!==typeof e?null:1===t?Object(A.jsxs)("span",{children:[e," "]}):null}))})}},n.key);case"hasmany":return Object(A.jsx)(Lt,{title:Object(A.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-around"},children:[n.title,n.file&&Object(A.jsx)(ae.a,{color:"cyan",children:"Files"})]}),dataIndex:n.dataIndex,render:function(e){return Object(A.jsxs)("span",{children:[null===e||void 0===e?void 0:e.length," ",n.title]})}},n.key);default:return Object(A.jsx)(Lt,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),width:100,dataIndex:n.dataIndex,render:function(e){return Object(A.jsxs)("span",{children:[e.toString().slice(0,80),e.toString().length>80?"...":null]})}},n.key)}}))})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{title:"Available Collections",subTitle:"Select any collection to view data",ghost:!1}),Object(A.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:20,width:"100%"},children:Object(A.jsx)(ie.b,{dataSource:H,renderItem:function(e){return Object(A.jsx)(ae.a,{style:{paddingTop:15,paddingBottom:15,textTransform:"capitalize",margin:5,letterSpacing:1.2,cursor:"pointer",alignContent:"center",paddingLeft:30,paddingRight:30,fontWeight:600,fontSize:20},color:"orange",onClick:function(){U(e),t.push("/data/".concat(e.name))},children:Object(A.jsx)("span",{children:e.name})})}})})]})};var Et=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{title:"File Management",ghost:!1}),Object(A.jsx)(pt,{deleteButton:!0})]})};var At=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.collections})).filter((function(e){return e.show})),n=r.a.useCallback((function(t){return e(N(t))}),[e]),c=function(e){return Object.keys(e.publicMethods||{}).map((function(e){return{label:e,value:"".concat(e)}}))},a=function(e){return Object.keys(e.publicMethods||{}).filter((function(t){return e.publicMethods[t]})).map((function(e){return"".concat(e)}))};return Object(A.jsxs)("div",{children:[Object(A.jsx)(E.a,{title:"Auth Management",subTitle:"Public routes available",ghost:!1}),Object(A.jsx)(le.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:t.map((function(e){return Object(A.jsxs)(se.a,{className:"gutter-row",span:12,children:[Object(A.jsx)(E.a,{title:Object(A.jsx)(ae.a,{children:e.name}),style:{textTransform:"capitalize"}}),Object(A.jsx)(E.a,{children:Object(A.jsx)(fe.a.Group,{options:c(e),defaultValue:a(e),onChange:function(t){return function(e,t){k.b.loading({content:"Saving...",key:"updatable"});var c={list:!1,create:!1,read:!1,update:!1,delete:!1,deleteAll:!1};t.forEach((function(e){c[e]=!0})),e.publicMethods=c,n(e)}(e,t)}})})]})}))})]})},Dt=n(487),Rt=n(514);var Mt=function(){var e=Object(a.useState)({collection:"",method:""}),t=Object(R.a)(e,2),n=t[0],c=t[1],r=Object(o.d)((function(e){return e.collections})).filter((function(e){return e.show})).map((function(e){return{title:e.name,key:e.name,icon:Object(A.jsx)(Rt.a,{}),children:[{title:"list",key:"".concat(e.name,"-list"),icon:Object(A.jsx)(Rt.a,{})},{title:"create",key:"".concat(e.name,"-create"),icon:Object(A.jsx)(Rt.a,{})},{title:"read",key:"".concat(e.name,"-read"),icon:Object(A.jsx)(Rt.a,{})},{title:"update",key:"".concat(e.name,"-update"),icon:Object(A.jsx)(Rt.a,{})},{title:"delete",key:"".concat(e.name,"-delete"),icon:Object(A.jsx)(Rt.a,{})},{title:"deleteAll",key:"".concat(e.name,"-deleteAll"),icon:Object(A.jsx)(Rt.a,{})}].filter((function(t){return e.operations[t.title]}))}})).filter((function(e){return e.children.length}));return Object(a.useEffect)((function(){r.length&&c({collection:r[0].title,method:r[0].children[0].title})}),[]),Object(A.jsxs)("div",{children:[Object(A.jsx)(E.a,{title:"Api Documentation",subTitle:"Powered by swagger.io",ghost:!1,extra:[Object(A.jsx)(f.a,{className:"button-blue",onClick:function(){window.open("http://localhost:3002/admin/api-docs/","_blank").focus()},children:"Open docs"})]}),Object(A.jsxs)(le.a,{children:[Object(A.jsx)(se.a,{lg:3,style:{height:"100vh"},children:Object(A.jsx)(Dt.a,{showLine:!0,showIcon:!1,defaultExpandParent:!0,onSelect:function(e,t){var n=e[0].toString().split("-"),a=Object(R.a)(n,2),i=a[0],l=a[1];c(l?{collection:i,method:l}:{collection:i,method:r.find((function(e){return e.title===i})).children[0].title})},treeData:r,style:{backgroundColor:"transparent",padding:20,height:"100vh"}})}),Object(A.jsxs)(se.a,{lg:21,style:{height:"100vh"},children:[Object(A.jsx)(E.a,{title:Object(A.jsx)("span",{style:{textTransform:"capitalize"},children:null===n||void 0===n?void 0:n.collection}),subTitle:"".concat(n.method)}),Object(A.jsx)(le.a,{})]})]})]})},Bt=n(515),Vt=n(268);var _t=function(){var e=Object(a.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(R.a)(r,2),l=i[0],s=i[1];return Object(A.jsxs)("div",{style:{display:"flex",height:"100vh",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(A.jsx)("img",{src:"/img/black-logo.png",alt:"",width:300}),Object(A.jsx)("br",{}),Object(A.jsxs)("div",{style:{height:120,width:300,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(A.jsx)(re.a,{placeholder:"Email",onChange:function(e){c(e.target.value)}}),Object(A.jsx)(re.a.Password,{placeholder:"Password",iconRender:function(e){return e?Object(A.jsx)(Bt.a,{}):Object(A.jsx)(Vt.a,{})},onChange:function(e){s(e.target.value)}}),Object(A.jsx)(f.a,{type:"primary",onClick:Object(m.a)(x.a.mark((function e(){var t,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a={email:n,password:l},T.a.post("/auth/login",a).then((function(e){var t=e.data;return t.status?(localStorage.setItem("token",t.token),e):e}));case 2:t=e.sent,(c=t.data).status?(k.b.success(c.message),setTimeout((function(){window.location.reload()}),1e3)):k.b.error(c.message);case 5:case"end":return e.stop()}var a}),e)}))),children:"Login"})]})]})},Pt=b.a.Content;function Gt(e){var t=e.error,n=e.resetErrorBoundary;return Object(A.jsx)(h.a,{message:"Something broke, please try again",description:t.message,type:"error",action:Object(A.jsx)(f.a,{onClick:n,size:"small",danger:!0,children:"Detail"})})}var Ut=function(){var e=Object(o.c)();return Object(a.useEffect)((function(){e(function(){var e=Object(m.a)(x.a.mark((function e(t){var n,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/admin/model/list");case 2:n=e.sent,c=n.data,a={type:g,collections:c,collection:c[0]||{}},t(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(ne,{}),Object(A.jsxs)(b.a,{children:[Object(A.jsx)(D,{}),Object(A.jsx)(Pt,{style:{overflow:"auto"},children:Object(A.jsxs)(d.c,{children:[Object(A.jsx)(d.a,{path:"/",exact:!0,component:Ye}),Object(A.jsx)(d.a,{path:"/collections",exact:!0,component:Ge}),Object(A.jsx)(d.a,{path:"/data",exact:!0,component:qt}),Object(A.jsx)(d.a,{path:"/data/:collection",exact:!0,component:qt}),Object(A.jsx)(d.a,{path:"/files",exact:!0,component:Et}),Object(A.jsx)(d.a,{path:"/auth",exact:!0,component:At}),Object(A.jsx)(d.a,{path:"/api-docs",exact:!0,component:Mt})]})})]})]})},Ht=function(){var e=localStorage.getItem("token");return Object(A.jsx)(b.a,{className:"main",children:Object(A.jsx)(O.ErrorBoundary,{FallbackComponent:Gt,onReset:function(){},children:Object(A.jsx)(j.a,{basename:"/admin-ui",children:e?Ut():Object(A.jsx)(d.a,{path:"/",exact:!0,component:_t})})})})},Kt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,516)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Jt={collections:[],selectedCollection:void 0},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(ce.a)(Object(ce.a)({},e),{},{collections:t.collections||[]});case y:return Object(ce.a)(Object(ce.a)({},e),{},{collections:e.collections.concat(t.collection).sort((function(e,t){return e.name.localeCompare(t.name)}))});case v:var n=e.collections.filter((function(e){return e.id!==t.collection.id})).sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(ce.a)(Object(ce.a)({},e),{},{collections:n,selectedCollection:void 0});case C:var c=t.collection;return Object(ce.a)(Object(ce.a)({},e),{},{selectedCollection:c});case w:var a=t.collection;return e.collections=e.collections.map((function(e){return e.id===a.id?a:e})),e.selectedCollection=a,Object(ce.a)({},e)}return e},Yt=Object(s.b)(Wt,Object(s.a)(u.a));"".concat("","/dark-theme.css");l.a.render(Object(A.jsx)(o.a,{store:Yt,children:Object(A.jsx)(Ht,{})}),document.getElementById("root")),Kt()}},[[476,1,2]]]);
//# sourceMappingURL=main.833b4bb2.chunk.js.map