(this["webpackJsonp@hydyco/admin-client"]=this["webpackJsonp@hydyco/admin-client"]||[]).push([[0],{269:function(e,t,n){},465:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(31),l=n.n(i),s=n(199),o=n(32),u=n(242),j=(n(269),n(78)),d=n(41),b=n(468),h=n(27),f=n.n(h),O=n(45),x="INIT_COLLECTION",p="ADD_COLLECTION",m="REMOVE_COLLECTION",g="SET_COLLECTION",v="UPDATE_COLLECTION",y=n(141),C=n.n(y);function w(e){return C.a.post("/admin/model/create/"+e.name,e)}function S(e){var t=e.name;return C.a.delete("/admin/model/delete/"+t)}function k(e){return C.a.post("/admin/model/crud/",e)}function T(e){return F({type:g,collection:e})}function z(e){var t={type:v,collection:e};return function(){var n=Object(O.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(e);case 2:a(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}!function(e){e.list="list",e.create="create",e.update="update",e.delete="delete",e.deleteAll="deleteAll",e.ref="ref"}(a||(a={}));var F=function(e){return function(t){return t(e)}},L=n(476),I=n(3);var q=function(){var e=Object(d.g)(),t={"":"Schema Flow",collections:"Schema",data:"Data Flow"}[e.pathname.split("/")[1]],n={"":"Visualize you database",collections:"Manage your mongoose schema",data:"Manage your data"}[e.pathname.split("/")[1]];return"Data Flow"===t?null:Object(I.jsx)(I.Fragment,{children:t&&Object(I.jsx)(L.a,{ghost:!1,title:t,subTitle:n})})},N=n(24),E=n(76),D=n(469),R=n(486),A=n(487),B=n(488),M=n(489),V=n(490),_=b.a.Sider;var G,P,U=function(){var e=Object(d.g)(),t=Object(c.useState)(!1),n=Object(N.a)(t,2),a=n[0],r=n[1],i=e.pathname.split("/")[1];return Object(I.jsxs)(_,{collapsible:!0,collapsedWidth:"50",theme:"light",collapsed:a,onCollapse:function(e,t){r(e)},children:[Object(I.jsx)("div",{className:"logo-container",children:Object(I.jsx)("img",{className:a?"logo-small":"logo-large",src:a?"/img/o-logo.png":"/img/black-logo.png",alt:""})}),Object(I.jsxs)(E.a,{style:{marginTop:10},mode:"inline",defaultSelectedKeys:[i],children:[Object(I.jsx)(E.a.Item,{icon:Object(I.jsx)(R.a,{}),children:Object(I.jsx)(j.b,{to:"/",children:"Schema Flow"})},""),Object(I.jsx)(E.a.Item,{icon:Object(I.jsx)(A.a,{}),children:Object(I.jsx)(j.b,{to:"/collections",children:"Collections"})},"collection"),Object(I.jsx)(E.a.Item,{icon:Object(I.jsx)(B.a,{}),children:Object(I.jsx)(j.b,{to:"/data",children:"Data Flow"})},"data"),Object(I.jsx)(D.a,{orientation:"left",children:a?Object(I.jsx)(M.a,{}):Object(I.jsx)("b",{children:"Plugins"})}),Object(I.jsx)(E.a.Item,{icon:Object(I.jsx)(V.a,{}),children:Object(I.jsx)(j.b,{to:"/files",children:"Files"})},"files")]})]})},K=n(22),W=n(481),H=n(253),Y=n(485),Z=n(483),J=n(44),Q=n(251),X=n(125),$=n(72),ee=n(473),te=n(256),ne=n(257);!function(e){e.string="string",e.number="number",e.boolean="boolean",e.ref="ref",e.date="date",e.array="array",e.object="object",e.enums="enums",e.file="file"}(G||(G={})),function(e){e.hasOne="hasone",e.hasMany="hasmany",e.none="none"}(P||(P={}));var ae=function(e){var t=e.type;return t=t.toLowerCase(),Object(I.jsx)("div",{children:Object(I.jsx)(H.a,{color:function(){switch(t){case G.string:return"#f50";case G.number:return"#d4b106";case G.boolean:return"#52c41a";case G.ref:case G.date:case G.file:return"#13c2c2";default:return"#8c8c8c"}}(),style:{fontWeight:"bold"},children:function(){switch(t){case G.string:return"Abc";case G.number:return"123";case G.boolean:return"true";case G.ref:return"Relation";case G.date:return"17 Aug";case G.file:return"File";default:return"NA"}}()})})},ce=n(79),re=n(480),ie=n(139),le=n(255),se=n(482),oe=n(477).a.Text;function ue(e){var t=e.message,n=void 0===t?"This field is required":t;return Object(I.jsx)(oe,{type:"danger",style:{fontSize:12},strong:!0,children:n})}var je=function(e){var t=e.collections,n=e.isModalVisible,a=e.setIsModalVisible,i=Object(c.useState)(""),l=Object(N.a)(i,2),s=l[0],u=l[1],j=Object(c.useState)(!0),d=Object(N.a)(j,2),b=d[0],h=d[1],x=Object(c.useState)({list:!0,create:!0,read:!0,update:!0,delete:!0,deleteAll:!0}),m=Object(N.a)(x,2),g=m[0],v=m[1],y=Object(c.useRef)(),C=Object(o.c)(),S=r.a.useCallback((function(e){return C(function(e){var t={type:p,collection:e};return function(){var n=Object(O.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(e);case 2:a(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[C]),k=r.a.useCallback((function(e){return C(T(e))}),[C]),z=function(){if(0!==s.length)if(t.find((function(e){return e.name===s})))Q.b.error("Collection already exists");else{var e={id:Object(se.a)(),name:s,schema:{},fields:0,show:b,operations:g,x:300*Math.floor(t.length%4)+20,y:60*(Math.floor(t.length/4)+1)};S(e),k(e),u(""),a(!1)}};return Object(c.useEffect)((function(){y.current&&y.current.focus()}),[]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(J.a,{type:"primary",shape:"round",onClick:function(){a(!0)},children:"Create New"}),Object(I.jsx)(re.a,{title:Object(I.jsxs)("span",{children:[" ",Object(I.jsx)(le.a,{})," Create new collection"]}),visible:n,onOk:z,onCancel:function(){a(!1)},children:Object(I.jsxs)(Z.b,{direction:"vertical",children:[Object(I.jsx)(W.a,{ref:y,placeholder:"Collection Name",value:s,onChange:function(e){var t=e.target.value;/[^a-zA-Z]/.test(t)||u(t)},onKeyDown:function(e){"Enter"===e.key&&z()}}),0===s.length&&Object(I.jsx)(ue,{}),Object(I.jsxs)(ie.a,{onChange:function(){return h(!b)},value:b,children:[" ",Object(I.jsx)("b",{children:"Show on data flow ?"})]}),Object(I.jsx)(H.a,{color:"geekblue",children:"Allowed Operations"}),Object(I.jsx)("div",{children:Object.keys(g).map((function(e){return Object(I.jsxs)(ie.a,{onChange:function(){return v(Object(K.a)(Object(K.a)({},g),{},Object(ce.a)({},e,!g[e])))},value:g[e],children:[" ",Object(I.jsx)("b",{children:e})]})}))})]})})]})},de=n(168),be=n(484);var he=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(K.a)(Object(K.a)({},e),a)}))};return Object(I.jsx)(I.Fragment,{children:"boolean"===t.type&&Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%"},children:[Object(I.jsx)("span",{children:"Name for the type"}),Object(I.jsx)(W.a,{placeholder:"Type Name",onChange:function(e){return a("name",e.target.value)},defaultValue:t.name}),Object(I.jsx)("span",{children:"Default value"}),Object(I.jsx)(be.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.default,onChange:function(e){return a("default",e)}}),Object(I.jsx)("span",{children:"Required"}),Object(I.jsx)(be.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return a("required",e)}})]})})},fe=n(478);var Oe=function(e){var t=e.state,n=e.setState,a=Object(c.useState)([]),r=Object(N.a)(a,2),i=r[0],l=r[1],s=function(e,t){var a={};a[e]=t,n((function(e){return Object(K.a)(Object(K.a)({},e),a)}))};return Object(I.jsx)(I.Fragment,{children:"number"===t.type&&Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%"},children:[Object(I.jsx)("span",{children:"Name for the type"}),Object(I.jsx)(W.a,{placeholder:"Type Name",onChange:function(e){return s("name",e.target.value)}}),Object(I.jsx)("span",{children:"Default value"}),Object(I.jsx)(fe.a,{min:1,max:10,onChange:function(e){return s("default",e)},placeholder:"10",style:{width:"100%"}}),Object(I.jsx)("span",{children:"Settings"}),Object(I.jsx)(ie.a.Group,{style:{width:"100%"},onChange:function(e){var t={index:!1,required:!1,unique:!1};n((function(n){return Object.keys(t).forEach((function(n){e.includes(n)&&(t[n]=!0)})),Object(K.a)(Object(K.a)({},n),t)})),l(e)},value:i,children:Object(I.jsxs)(Z.b,{direction:"vertical",children:[Object(I.jsx)(ie.a,{value:"required",children:"Required"}),Object(I.jsx)(ie.a,{value:"index",children:"Index"}),Object(I.jsx)(ie.a,{value:"unique",children:"Unique"}),Object(I.jsx)(ie.a,{value:"minLength",children:"Minimum Length"}),i.includes("minLength")&&Object(I.jsx)(fe.a,{min:1,onChange:function(e){return s("minLength",e)}}),Object(I.jsx)(ie.a,{value:"maxLength",children:"Maximum Length"}),i.includes("maxLength")&&Object(I.jsx)(fe.a,{min:1,onChange:function(e){return s("maxLength",e)}})]})})]})})};var xe=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(K.a)(Object(K.a)({},e),a)}))},c=Object(o.d)((function(e){return e.collections}),o.b);return Object(I.jsx)(I.Fragment,{children:"ref"===t.type&&Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(I.jsx)("span",{children:"Name for the type"}),Object(I.jsx)(W.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return a("name",e.target.value)}}),Object(I.jsx)(ue,{}),Object(I.jsx)("span",{children:"Relationship"}),Object(I.jsxs)(de.a.Group,{value:t.relationship,onChange:function(e){return a("relationship",e.target.value)},children:[Object(I.jsx)(de.a.Button,{value:P.hasMany,children:"Has Many"}),Object(I.jsx)(de.a.Button,{value:P.hasOne,children:"Has One"})]}),Object(I.jsx)("span",{children:"Auto Populate"}),Object(I.jsxs)(de.a.Group,{onChange:function(e){return a("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(I.jsx)(de.a,{value:!0,children:"True"}),Object(I.jsx)(de.a,{value:!1,children:"False"})]}),Object(I.jsx)("span",{children:"Required"}),Object(I.jsx)(be.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return a("required",e)}}),Object(I.jsx)("span",{children:"Ref"}),Object(I.jsx)(de.a.Group,{value:t.ref,onChange:function(e){return a("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:c.map((function(e,t){var n=e.name;return Object(I.jsx)(de.a.Button,{value:n,style:{textTransform:"capitalize"},children:n},t)}))})]})})},pe=W.a.TextArea,me={index:!1,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,maxLength:0,minLength:0};var ge=function(e){var t=e.state,n=e.setState,a=Object(c.useState)([]),r=Object(N.a)(a,2),i=r[0],l=r[1],s=Object(c.useState)(""),o=Object(N.a)(s,2),u=o[0],j=o[1],d=function(e,t){var a={};a[e]=t,n((function(e){return Object(K.a)(Object(K.a)({},e),a)}))};return Object(c.useEffect)((function(){var e=Object.keys(t).filter((function(e){return me[e]&&function(e){return function(t){return t[e]}}(e)(t)}));l(e),t.enum.length&&j(t.enum.join("\n"))}),[t]),Object(I.jsx)(I.Fragment,{children:"string"===t.type&&Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(I.jsx)("span",{children:"Name for the type"}),Object(I.jsx)(W.a,{placeholder:"Type Name",onChange:function(e){return d("name",e.target.value)},value:t.name}),Object(I.jsx)(ue,{}),Object(I.jsx)("span",{children:"Default value"}),Object(I.jsx)(W.a,{onChange:function(e){return d("default",e.target.value)},value:t.default,placeholder:"Keep empty for not setting the value"}),Object(I.jsx)("span",{children:"Enums"}),Object(I.jsx)(pe,{showCount:!0,maxLength:100,style:{width:"100%"},value:u,placeholder:"Keep empty for not setting the value",onChange:function(e){j(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d("enum",u.trim().split("\n"))}}),Object(I.jsx)("span",{children:"Settings"}),Object(I.jsx)(ie.a.Group,{style:{width:"100%",height:"100%"},onChange:function(e){n((function(t){return e.includes("maxLength")||(t.maxLength=0),e.includes("minLength")||(t.minLength=0),Object.keys(me).forEach((function(t){me[t]=e.includes(t)})),Object(K.a)(Object(K.a)({},t),me)})),l(e)},value:i,children:Object(I.jsxs)(X.a,{children:[Object(I.jsxs)($.a,{lg:12,className:"d-flex-col",children:[Object(I.jsx)(ie.a,{value:"required",children:"Required"}),Object(I.jsx)(ie.a,{value:"index",children:"Index"}),Object(I.jsx)(ie.a,{value:"unique",children:"Unique"}),Object(I.jsx)(ie.a,{value:"lowercase",disabled:i.includes("uppercase"),children:"Lowercase"}),Object(I.jsx)(ie.a,{value:"uppercase",disabled:i.includes("lowercase"),children:"Uppercase"})]}),Object(I.jsxs)($.a,{lg:12,className:"d-flex-col",children:[Object(I.jsx)(ie.a,{value:"trim",children:"Trim"}),Object(I.jsx)(ie.a,{value:"minLength",children:"Minimum Length"}),i.includes("minLength")&&Object(I.jsx)(fe.a,{min:1,value:t.minLength||0,onChange:function(e){return d("minLength",e)}}),Object(I.jsx)(ie.a,{value:"maxLength",children:"Maximum Length"}),i.includes("maxLength")&&Object(I.jsx)(fe.a,{min:1,value:t.maxLength||0,onChange:function(e){return d("maxLength",e)}})]})]})})]})})},ve=n(470);var ye=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(K.a)(Object(K.a)({},e),a)}))};return Object(I.jsx)(I.Fragment,{children:"date"===t.type&&Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%"},children:[Object(I.jsx)("span",{children:"Name for the type"}),Object(I.jsx)(W.a,{placeholder:"Type Name",onChange:function(e){return a("name",e.target.value)}}),Object(I.jsx)("span",{children:"Default value"}),Object(I.jsx)(ve.a,{onChange:function(e){return a("default",e)}})]})})};var Ce=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(K.a)(Object(K.a)({},e),a)}))};return Object(I.jsx)(I.Fragment,{children:"file"===t.type&&Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(I.jsx)("span",{children:"Name for the type"}),Object(I.jsx)(W.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return a("name",e.target.value)}}),Object(I.jsx)(ue,{}),Object(I.jsx)("span",{children:"Relationship"}),Object(I.jsxs)(de.a.Group,{value:t.relationship,onChange:function(e){return a("relationship",e.target.value)},children:[Object(I.jsx)(de.a.Button,{value:P.hasMany,children:"Has Many"}),Object(I.jsx)(de.a.Button,{value:P.hasOne,children:"Has One"})]}),Object(I.jsx)("span",{children:"Auto Populate"}),Object(I.jsxs)(de.a.Group,{onChange:function(e){return a("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(I.jsx)(de.a,{value:!0,children:"True"}),Object(I.jsx)(de.a,{value:!1,children:"False"})]}),Object(I.jsx)("span",{children:"Required"}),Object(I.jsx)(be.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return a("required",e)}}),Object(I.jsx)("span",{children:"Ref"}),Object(I.jsx)(de.a.Group,{value:t.ref,onChange:function(e){return a("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:Object(I.jsx)(de.a.Button,{value:"file",style:{textTransform:"capitalize"},children:"File"})})]})})};var we=function(e){var t=e.selectedCollection,n=e.editSchema,a=Object(c.useState)(!1),i=Object(N.a)(a,2),l=i[0],s=i[1],u=Object(c.useState)({name:"",type:G.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,enum:[],ref:"none",relationship:P.hasMany,autopopulate:!0}),j=Object(N.a)(u,2),d=j[0],b=j[1],h=Object(o.c)(),f=r.a.useCallback((function(e){return h(z(e))}),[h]),O=function(){s(!1)};Object(c.useEffect)((function(){l||b({name:"",type:G.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,ref:"none",relationship:P.hasMany,enum:[],autopopulate:!0})}),[l]),Object(c.useEffect)((function(){n&&(s(!0),b(n))}),[n]);var x=Object(I.jsx)(J.a,{type:"primary",onClick:function(){var e=Object(K.a)({},t.schema);if(n||!e[d.name]){var a=t.fields+1;e[d.name]=d;var c=Object(K.a)(Object(K.a)({},t),{},{schema:e,fields:a});f(c),O()}else Q.b.error("Type already exist")},disabled:0===d.name.length,children:"Save"});return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(J.a,{type:"primary",onClick:function(){s(!0)},style:{width:"100%",height:50,textTransform:"uppercase",fontWeight:"bold"},children:"Add New Field"}),Object(I.jsxs)(re.a,{title:Object(I.jsxs)(Z.b,{children:[" ",Object(I.jsx)(le.a,{}),Object(I.jsxs)(de.a.Group,{onChange:function(e){b((function(t){return Object(K.a)(Object(K.a)({},t),{},{type:e.target.value})}))},value:d.type,children:[Object(I.jsx)(de.a.Button,{value:G.string,children:"String"}),Object(I.jsx)(de.a.Button,{value:G.boolean,children:"Boolean"}),Object(I.jsx)(de.a.Button,{value:G.number,children:"Number"}),Object(I.jsx)(de.a.Button,{value:G.ref,children:"Ref"}),Object(I.jsx)(de.a.Button,{value:G.date,children:"Date"}),Object(I.jsx)(de.a.Button,{value:G.file,children:"File"})]})]}),visible:l,onOk:O,onCancel:function(){s(!1)},footer:x,width:800,children:[Object(I.jsx)(ge,{state:d,setState:b}),Object(I.jsx)(he,{state:d,setState:b}),Object(I.jsx)(Oe,{state:d,setState:b}),Object(I.jsx)(xe,{state:d,setState:b}),Object(I.jsx)(ye,{state:d,setState:b}),Object(I.jsx)(Ce,{state:d,setState:b})]})]})},Se=n(140),ke=re.a.confirm;var Te=function(e){var t=e.removeCollectionType,n=e.collection,a=e.key;return ke({title:"Sure you want to delete type?",icon:Object(I.jsx)(Se.a,{}),content:null,onOk:function(){!function(){var e=n.schema;delete e[a],n.schema=e,n.fields=n.fields-1,t(n)}()},onCancel:function(){console.log("Cancel")}})},ze=re.a.confirm;var Fe=function(e){var t=e.collection,n=e.deleteCollectionAction;return ze({title:"Sure you want to delete this collection?",icon:Object(I.jsx)(Se.a,{}),content:null,onOk:function(){n(t),Q.b.success("Collection removed")},onCancel:function(){console.log("Cancel")}})},Le=b.a.Sider,Ie=b.a.Content;W.a.Search;var qe=function(){var e=Object(c.useState)(),t=Object(N.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),l=Object(N.a)(i,2),s=l[0],u=l[1],j=Object(o.d)((function(e){return e.collections})),d=Object(c.useState)([]),h=Object(N.a)(d,2),x=h[0],p=h[1],g=Object(o.d)((function(e){return e.selectedCollection}),o.b),v=Object(o.c)(),y=r.a.useCallback((function(e){return v(T(e))}),[v]),C=r.a.useCallback((function(e){return v(z(e))}),[v]),w=r.a.useCallback((function(e){return v(z(e))}),[v]),k=r.a.useCallback((function(e){return v(function(e){var t={type:m,collection:e};return function(){var n=Object(O.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S(e);case 2:a(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[v]);return Object(c.useEffect)((function(){!g&&j.length&&y(j[0]),p(j)}),[j]),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(b.a,{style:{height:"100%"},children:[Object(I.jsxs)(Le,{width:"400",theme:"light",style:{backgroundColor:"transparent"},children:[Object(I.jsx)(L.a,{title:"Collection List",extra:[Object(I.jsxs)(H.a,{color:"green",children:["Total ",j.length]}),Object(I.jsx)(je,{collections:j,isModalVisible:s,setIsModalVisible:u})]}),Object(I.jsx)("div",{style:{padding:10},children:Object(I.jsx)(W.a,{size:"large",placeholder:"Search Collection",onChange:function(e){var t=[];e.target.value.length?(t=j.filter((function(t){return t.name.trim().toLowerCase().includes(e.target.value.toLowerCase())})),p(t)):p(j)}})}),Object(I.jsx)(Y.b,{grid:{gutter:10,xs:1,sm:1,md:1,lg:1,xl:1,xxl:1},dataSource:x,style:{padding:10,height:"80vh",overflow:"auto"},renderItem:function(e,t){return Object(I.jsx)(Y.b.Item,{children:Object(I.jsxs)(H.a,{style:{textTransform:"capitalize",cursor:"pointer",height:55,width:"100%",display:"grid",placeItems:"center",fontSize:"20px",letterSpacing:1.3},color:e.name===(null===g||void 0===g?void 0:g.name)?"black":"default",onClick:function(){y(e)},children:[e.name,Object(I.jsxs)("span",{style:{fontSize:12},children:[e.fields," fields",Object(I.jsx)("span",{style:{fontSize:12,marginLeft:10},children:e.show?null:"Hidden"})]})]},t)},t)}})]}),g&&Object(I.jsx)(b.a,{style:{backgroundColor:"#fafafb",height:"100%"},children:Object(I.jsxs)(Ie,{children:[Object(I.jsx)(L.a,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:g.name}),extra:[Object(I.jsxs)(Z.b,{children:[Object(I.jsx)(J.a,{onClick:function(){w(g),Q.b.success("Collection Saved")},children:"Save"}),Object(I.jsx)(J.a,{type:"primary",onClick:function(){Fe({deleteCollectionAction:k,collection:g})},children:"Delete"})]})]}),Object(I.jsx)("br",{}),Object(I.jsx)(X.a,{children:Object(I.jsx)($.a,{span:24,style:{padding:20},children:Object(I.jsxs)(ee.a,{bordered:!1,style:{boxShadow:"rgb(227 233 243) 0px 2px 4px"},title:Object(I.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(I.jsxs)("h1",{children:["".concat(g.fields," fields")," "]})}),bodyStyle:{padding:0},children:[Object.keys(g.schema).map((function(e,t){var n=g.schema[e],c=n.type;return Object(I.jsxs)(X.a,{gutter:0,style:{height:60,padding:15,borderBottom:"1px solid #f0f0f0"},align:"middle",children:[Object(I.jsx)($.a,{span:6,children:Object(I.jsx)(ae,{type:c})}),Object(I.jsxs)($.a,{span:6,children:[Object(I.jsx)("span",{style:{fontSize:15,color:"#141414",fontWeight:500},children:e})," "]}),Object(I.jsxs)($.a,{span:6,children:[Object(I.jsx)("span",{style:{fontSize:15,color:"#141414",textTransform:"capitalize"},children:c})," "]}),Object(I.jsx)($.a,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:Object(I.jsxs)(Z.b,{size:25,children:[Object(I.jsx)(te.a,{style:{color:"#8c8c8c",fontSize:20},onClick:function(){return a(Object(K.a)(Object(K.a)({},n),{},{name:e}))}}),Object(I.jsx)(ne.a,{style:{color:"#cf1322",fontSize:20},className:"pointer",onClick:function(){return Te({removeCollectionType:C,collection:g,key:e})}})]})})]},t)})),Object(I.jsx)(we,{selectedCollection:g,editSchema:n})]})})})]})})]})})},Ne=n(138),Ee=n(254),De=n(491),Re=n(258);var Ae=function(e){var t=e.collection,n=Object.keys(t.schema).map((function(e,n){return{key:n,field:e,type:t.schema[e].type}})),a=Object(c.useState)(!0),r=Object(N.a)(a,2),i=r[0],l=r[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("h2",{style:{backgroundColor:"#1890ff",textTransform:"capitalize",padding:10,color:"white",letterSpacing:1.5,display:"flex",justifyContent:"space-between",margin:0},children:[t.name,Object(I.jsxs)("span",{style:{cursor:i?"zoom-out":"zoom-in"},onClick:function(){return l(!i)},children:[" ",i?Object(I.jsx)(Re.a,{}):Object(I.jsx)(De.a,{})," "]})]}),i&&Object(I.jsx)("table",{style:{width:"100%",transition:"5s"},children:n.map((function(e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{style:{paddingLeft:8,textAlign:"left",fontSize:16,letterSpacing:1.2},children:e.field}),Object(I.jsx)("td",{style:{paddingRight:8,textAlign:"right",fontSize:14,letterSpacing:1.2,color:"#8c8c8c"},children:e.type})]},e.key)}))})]})},Be=function(){var e=Object(o.d)((function(e){return e.collections})),t=Object(c.useState)([]),n=Object(N.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([0,0]),l=Object(N.a)(i,2),s=l[0],u=l[1],j=function(){var t=[];e.forEach((function(e,n){t.push({id:e.name,data:{label:Object(I.jsx)("div",{children:Object(I.jsx)(Ae,{collection:e})})},style:{padding:0,width:"300px",borderColor:"#40a9ff",borderRadius:0},position:{x:e.x,y:e.y}}),t.push.apply(t,Object(Ne.a)(function(e,t,n){var a=[];return Object.keys(e).forEach((function(c,r){e[c].type===G.ref&&a.push({id:"e1-".concat(n,"-").concat(r,"-").concat(c),source:t,target:e[c].ref,type:"smoothstep",label:"".concat(t," ").concat(e[c].relationship," ").concat(e[c].ref),animated:!1,labelStyle:{textTransform:"lowercase",fontSize:20,letterSpacing:1.2,backgroundColor:"#ff9c6e"},style:{width:"100%",padding:20,borderRadius:5}})})),a}(e.schema,e.name,e.id)))})),r(t)};Object(c.useEffect)((function(){j(),e.length&&(u([parseInt(e[0].x.toString()),parseInt(e[0].y.toString())]),console.log(s))}),[e]);var d=function(){var t=Object(O.a)(f.a.mark((function t(n,a,c){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.find((function(e){return e.name===n}))){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.x=a,r.y=c,t.next=8,w(r);case 8:console.log("Node Position Updated"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n,a){return t.apply(this,arguments)}}();return Object(I.jsx)("div",{style:{width:"100%",height:"100vh",overflow:"auto"},children:Object(I.jsx)(Ee.a,{defaultPosition:s,elements:a,minZoom:.4,defaultZoom:1,snapToGrid:!0,snapGrid:[15,15],onlyRenderVisibleElements:!0,onNodeDragStop:function(e,t){d(t.id,t.position.x,t.position.y)}})})},Me=n(471),Ve=n(492),_e=n(246),Ge=n.n(_e),Pe=n(137),Ue=n(474),Ke=n(65),We=n.n(Ke),He=Pe.a.Option;var Ye=function(e){var t=e.schemaValue,n=Object(c.useState)([]),r=Object(N.a)(n,2),i=r[0],l=r[1],s=Object(c.useState)(""),o=Object(N.a)(s,2),u=o[0],j=o[1],d=Object(c.useState)([]),b=Object(N.a)(d,2),h=b[0],x=b[1],p=Object(c.useState)(""),m=Object(N.a)(p,2),g=m[0],v=m[1],y=function(){var e=Object(O.a)(f.a.mark((function e(){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={model:t.ref,operations:a.ref,data:{query:{search:u}}},e.next=4,k(n);case 4:c=e.sent,r=c.data,l(r.list),x(r.searchValues),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),C=i.map((function(e){return Object(I.jsx)(He,{value:e._id,children:h.map((function(t){var n;return(null===(n=e[t])||void 0===n?void 0:n.length)?"".concat(e[t]):e._id}))})}));return Object(c.useEffect)((function(){y()}),[u]),Object(I.jsx)(Ue.a.Item,{label:Object(I.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(I.jsx)(Pe.a,{showSearch:!0,value:g,placeholder:"Search anything in ".concat(t.name),defaultActiveFirstOption:!0,showArrow:!1,filterOption:!1,onSearch:function(e){return j(e)},onChange:function(e){return v(e)},notFoundContent:null,mode:"hasmany"===t.relationship?"multiple":void 0,children:C})})},Ze=n(472),Je=n(479),Qe=n(475),Xe=n(166),$e=n(493),et=n(247),tt=n.n(et),nt=re.a.confirm,at=Ze.a.Dragger;var ct=function(e){var t=e.setCustomFiles,n=e.deleteButton,r=e.filterButton,i="file",l=Object(c.useState)([]),s=Object(N.a)(l,2),o=s[0],u=s[1],j=Object(c.useState)([]),d=Object(N.a)(j,2),b=d[0],h=d[1],x=Object(c.useState)(!0),p=Object(N.a)(x,2),m=p[0],g=p[1],v=Object(c.useState)(!1),y=Object(N.a)(v,2),C=y[0],w=y[1],S=Object(c.useState)({current:1,pageSize:10}),T=Object(N.a)(S,2),z=T[0],F=T[1];Object(c.useEffect)((function(){"function"===typeof t&&t(Object(Ne.a)(b))}),[b]);var q={multiple:!0,name:"manual",action:"/admin/file/manual",defaultFileList:[],onChange:function(e){var t=e.file.status;"done"===t?Q.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&Q.b.error("".concat(e.file.name," file upload failed.")),e.fileList=[]},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},E=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var c,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,c={model:t,operations:a.list,data:{query:{pagination:n}}},e.next=5,k(c);case 5:r=e.sent,i=r.data,F(i.pagination),u(i.list),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:g(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,t={model:i,operations:a.deleteAll,data:{id:b}},e.next=5,k(t);case 5:Q.b.success("Records Deleted"),h([]),E(i,z),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:g(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){E(i,z)}),[]),Object(I.jsx)(I.Fragment,{children:m?Object(I.jsx)("div",{style:{padding:20},children:Object(I.jsx)(Je.a,{active:!0})}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L.a,{style:{marginTop:2},ghost:!0,title:Object(I.jsxs)(Z.b,{children:[(null===z||void 0===z?void 0:z.total)&&Object(I.jsxs)(H.a,{color:"green",children:["Total ",z.total]}),Object(I.jsxs)(H.a,{color:"blue",children:["Selected ",b.length]})]}),extra:[b.length&&n?Object(I.jsxs)(J.a,{onClick:function(){return nt({title:"Sure you want to delete selected records?",icon:Object(I.jsx)(Se.a,{}),content:null,onOk:function(){D()},onCancel:function(){console.log("Cancel")}})},children:[Object(I.jsx)(ne.a,{}),"Delete"]}):null,r&&Object(I.jsxs)(J.a,{children:[Object(I.jsx)(Ve.a,{}),"Filter"]},"2"),Object(I.jsxs)(J.a,{type:"primary",onClick:function(){w(!0)},children:[Object(I.jsx)(le.a,{}),"Upload"]},"1")]}),Object(I.jsx)("div",{className:"grid-responsive",children:o.map((function(e){return Object(I.jsxs)("div",{className:"on-hover",style:{border:b.includes(e._id)?"1px solid #40a9ff":"none",backgroundColor:"white",cursor:"pointer"},onClick:function(){h((function(t){var n=Object(Ne.a)(t);return n.includes(e._id)?n=n.filter((function(t){return t!==e._id})):n.push(e._id),n}))},children:[Object(I.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(Qe.a,{preview:!1,width:200,height:200,src:"/admin/file/get/"+e.filename,fallback:"/img/file.svg"})}),Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:10},children:[Object(I.jsx)("b",{children:e.originalname}),Object(I.jsxs)("span",{style:{color:"GrayText",display:"flex",justifyContent:"space-between"},children:[tt()(e.size)," ",e.mimetype]})]})]},e._id)}))}),Object(I.jsx)(Xe.a,{style:{textAlign:"right",margin:10},current:z.current,pageSize:z.pageSize,total:z.total,onChange:function(e,t){var n={current:e,pageSize:t,total:z.total};E(i,n)}}),Object(I.jsx)(re.a,{title:"Upload File",visible:C,onOk:function(){E(i,z),w(!1)},onCancel:function(){return w(!1)},destroyOnClose:!0,children:Object(I.jsxs)(at,Object(K.a)(Object(K.a)({},q),{},{className:"upload-list-inline",children:[Object(I.jsx)("p",{className:"ant-upload-drag-icon",children:Object(I.jsx)($e.a,{})}),Object(I.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(I.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))})]})})};var rt=function(e){var t=e.schemaValue,n=e.form,a=Object(c.useState)([]),r=Object(N.a)(a,2),i=r[0],l=r[1];return Object(c.useEffect)((function(){n.setFieldsValue(Object(ce.a)({},t.name,i))}),[i]),Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Ue.a.Item,{label:Object(I.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(I.jsx)("div",{children:Object(I.jsx)(ct,{setCustomFiles:l})})})})},it=Pe.a.Option;var lt=function(e){var t=e.selectedCollection,n=e.action,c=void 0===n?"create":n,r=e.id,i=e.selectedRecord,l=null===t||void 0===t?void 0:t.schema,s=Ue.a.useForm(),o=Object(N.a)(s,1)[0],u=function(){var e=Object(O.a)(f.a.mark((function e(n){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={model:(null===t||void 0===t?void 0:t.name)||"",operations:"create"===c?a.create:a.update,data:{body:n,id:r}},e.next=4,k(i);case 4:Q.b.success("Data Saved"),window.history.back(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Q.b.error(e.t0.response.data),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)(L.a,{onBack:function(){return window.history.back()},title:"create"===c?"Create New":"Edit"}),Object(I.jsx)(ee.a,{style:{marginLeft:10,marginRight:10},title:Object(I.jsx)("span",{style:{letterSpacing:1.2,textTransform:"capitalize"},children:null===t||void 0===t?void 0:t.name}),children:Object(I.jsxs)(Ue.a,{name:"basic",onFinish:function(e){console.log(e),u(e)},onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",size:"large",form:o,children:[l&&Object.keys(l).map((function(e){var t,n=function(e){return function(t){return t[e]}}(e)(l);switch(n.type){case"string":return Object(I.jsx)(Ue.a.Item,{label:Object(I.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required,enum:["male","female"]}],initialValue:"update"===c?i[n.name]:"",children:n.enum.length?Object(I.jsx)(Pe.a,{placeholder:"Select ".concat(n.name),children:Object(I.jsx)(I.Fragment,{children:n.enum.map((function(e){return Object(I.jsx)(it,{value:e,children:e})}))})}):Object(I.jsx)(W.a,{})});case"number":return Object(I.jsx)(Ue.a.Item,{label:Object(I.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===c?i[n.name]:"",children:Object(I.jsx)(fe.a,{style:{width:300}})});case"date":return Object(I.jsx)(Ue.a.Item,{label:Object(I.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===c?We()(i[n.name]):We()(),children:Object(I.jsx)(ve.a,{})});case"boolean":return Object(I.jsx)(Ue.a.Item,{label:Object(I.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:"update"===c?null===(t=i[n.name])||void 0===t?void 0:t.toString():"false",children:Object(I.jsxs)(Pe.a,{placeholder:"Select",children:[Object(I.jsx)(it,{value:"true",children:"True"}),Object(I.jsx)(it,{value:"false",children:"False"})]})});case"ref":return Object(I.jsx)(Ye,{schemaValue:n});case"file":return Object(I.jsx)(rt,{schemaValue:n,form:o});default:return null}})),Object(I.jsx)(Ue.a.Item,{children:Object(I.jsx)(J.a,{type:"primary",htmlType:"submit",children:"create"===c?"Save":"Update"})})]})})]})},st=n(198),ot=n.n(st);var ut=function e(t){return t=t.data,Object(I.jsx)("div",{style:{borderLeft:"6px solid #1890ff",border:"1px dotted #1890ff",padding:10,margin:2,width:"100%"},children:Object.keys(t).map((function(n){return console.log(n),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Z.b,{direction:"vertical",children:[Object(I.jsx)(ot.a,{style:{textTransform:"capitalize"},type:"secondary",children:n}),Object(I.jsx)("p",{children:"object"===typeof t[n]?Object(I.jsx)(e,{data:t[n]}):t[n]})]}),Object(I.jsx)("br",{})]})}))})},jt=function(e){var t=e.selectedCollection,n=(e.action,e.id,e.selectedRecord);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L.a,{onBack:function(){return window.history.back()},title:t.name,style:{textTransform:"capitalize"},ghost:!1}),Object(I.jsx)(ee.a,{style:{margin:10},children:Object(I.jsx)("div",{children:Object.keys(n).map((function(e){return"key"!==e&&Object(I.jsxs)("div",{children:[Object(I.jsxs)(Z.b,{direction:"vertical",style:{width:"100%"},children:[Object(I.jsx)(ot.a,{style:{textTransform:"capitalize"},type:"secondary",children:e}),Object(I.jsx)("p",{children:Array.isArray(n[e])?n[e].map((function(e){return Object(I.jsx)(ut,{data:e})})):"object"===typeof n[e]?Object(I.jsx)(ut,{data:n[e]}):n[e].toString()})]}),Object(I.jsx)("br",{})]})}))})})]})},dt=n(122),bt=Me.a.Column,ht=re.a.confirm;var ft=function(){var e=Object(d.h)().collection,t=Object(d.f)(),n=Ge.a.parse(window.location.href.split("?")[1]),r=Object(c.useState)([]),i=Object(N.a)(r,2),l=i[0],s=i[1],u=Object(c.useState)([]),j=Object(N.a)(u,2),b=j[0],h=j[1],x=Object(c.useState)({}),p=Object(N.a)(x,2),m=p[0],g=p[1],v=Object(c.useState)(!0),y=Object(N.a)(v,2),C=y[0],w=y[1],S=Object(c.useState)([]),z=Object(N.a)(S,2),F=z[0],q=z[1],E=Object(c.useState)({current:1,pageSize:10}),D=Object(N.a)(E,2),R=D[0],A=D[1],B=Object(o.c)(),M=Object(o.d)((function(e){return e.selectedCollection}),o.b),V=Object(c.useCallback)((function(e){return B(T(e))}),[B]),_=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})),G=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var c,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,c={model:t,operations:a.list,data:{query:{pagination:n}}},e.next=5,k(c);case 5:r=e.sent,i=r.data,A(i.pagination),s(i.list),h(i.column),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:w(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var t=Object(O.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(!0),t.prev=1,c={model:e,operations:a.delete,data:{id:n}},t.next=5,k(c);case 5:Q.b.success("Record Deleted"),G(e,R),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:w(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(O.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(!0),t.prev=1,n={model:e,operations:a.deleteAll,data:{id:F}},t.next=5,k(n);case 5:Q.b.success("Records Deleted"),q([]),G(e,R),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:w(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){e&&0===Object.keys(n).length&&(h([]),s([]),G(e,R)),M||t.push("/data")}),[e,M,window.location.href]);var W=l.map((function(e,t){return Object(K.a)({key:t},e)})),X=b.map((function(e){var t=e.name,n=e.type;return{title:t.toString(),dataIndex:t.toString(),key:t.toString(),type:n}}));return X.push({title:"Action",key:"operation",fixed:"right",width:50,type:"operation"}),e?n.action&&"create"===n.action&&M?Object(I.jsx)(lt,{selectedCollection:M,action:"create"}):n.action&&"update"===n.action&&M?Object(I.jsx)(lt,{selectedCollection:M,action:"update",id:n.id,selectedRecord:m}):n.action&&"show"===n.action&&M?Object(I.jsx)(jt,{selectedCollection:M,action:"show",id:n.id,selectedRecord:m}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L.a,{style:{marginTop:2},ghost:!1,onBack:function(){return window.history.back()},title:Object(I.jsxs)(Z.b,{children:[Object(I.jsxs)("span",{style:{textTransform:"capitalize"},children:[e," "]}),(null===R||void 0===R?void 0:R.total)&&Object(I.jsx)(H.a,{color:"blue",style:{borderRadius:"50%"},children:R.total})]}),extra:[F.length?Object(I.jsxs)(J.a,{onClick:function(){return ht({title:"Sure you want to delete selected records?",icon:Object(I.jsx)(Se.a,{}),content:null,onOk:function(){U()},onCancel:function(){console.log("Cancel")}})},children:[Object(I.jsx)(ne.a,{}),"Delete"]}):null,Object(I.jsxs)(J.a,{children:[Object(I.jsx)(Ve.a,{}),"Filter"]},"2"),Object(I.jsxs)(J.a,{type:"primary",onClick:function(){t.push("/data/".concat(e,"?action=create"))},children:[Object(I.jsx)(le.a,{}),"Create"]},"1")]}),Object(I.jsx)(Me.a,{loading:C,style:{padding:10},dataSource:W,size:"middle",rowKey:function(e){return e._id},rowSelection:{selectedRowKeys:F,onChange:function(e){q(e)}},pagination:R,onChange:function(t,n,a){A(t),G(e,t)},children:X.map((function(n){switch(n.type){case"objectId":return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),width:70,dataIndex:n.dataIndex},n.key);case"boolean":return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e,t,n){return void 0===e?null:Object(I.jsx)(I.Fragment,{children:e?Object(I.jsx)(H.a,{color:"green",style:{textTransform:"capitalize"},children:e.toString()}):Object(I.jsx)(H.a,{color:"red",style:{textTransform:"capitalize"},children:e.toString()})})}},n.key);case"date":return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return e?Object(I.jsx)("span",{children:We()(e).format("MM/DD/YYYY hh:mm")}):null}},n.key);case"operation":return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,width:60,render:function(n,a){return Object(I.jsxs)(Z.b,{children:[Object(I.jsx)(J.a,{icon:Object(I.jsx)(dt.a,{}),onClick:function(){g(a),t.push("/data/".concat(e,"?action=show&id=").concat(a._id))}}),Object(I.jsx)(J.a,{type:"text",icon:Object(I.jsx)(te.a,{}),onClick:function(){g(a),t.push("/data/".concat(e,"?action=update&id=").concat(a._id))}}),Object(I.jsx)(J.a,{type:"text",icon:Object(I.jsx)(ne.a,{}),onClick:function(){return ht({title:"Sure you want to delete this record?",icon:Object(I.jsx)(Se.a,{}),content:null,onOk:function(){P(a._id)},onCancel:function(){console.log("Cancel")}})}})]})}},n.key);case"hasone":return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return e&&Object(I.jsx)(Z.b,{direction:"vertical",children:"string"===typeof e?Object(I.jsxs)("span",{children:[e," "]}):Object.values(e).map((function(e){return"string"!==typeof e?null:Object(I.jsxs)("span",{children:[e," "]})}))})}},n.key);case"hasmany":return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,render:function(e){return Object(I.jsxs)("span",{children:[null===e||void 0===e?void 0:e.length," ",n.title]})}},n.key);default:return Object(I.jsx)(bt,{title:Object(I.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex},n.key)}}))})]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L.a,{title:"Available Collections",subTitle:"Select any collection to view data",ghost:!1}),Object(I.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:20,width:"100%"},children:Object(I.jsx)(Y.b,{dataSource:_,renderItem:function(e){return Object(I.jsx)(H.a,{style:{paddingTop:15,paddingBottom:15,textTransform:"capitalize",margin:5,letterSpacing:1.2,cursor:"pointer",alignContent:"center",paddingLeft:30,paddingRight:30,fontWeight:600,fontSize:20},onClick:function(){V(e),t.push("/data/".concat(e.name))},children:Object(I.jsx)("span",{children:e.name})})}})})]})};var Ot=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L.a,{title:"File Management",ghost:!1}),Object(I.jsx)(ct,{deleteButton:!0})]})},xt=b.a.Content;var pt=function(){var e=Object(o.c)();return Object(c.useEffect)((function(){e(function(){var e=Object(O.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/admin/model/list");case 2:n=e.sent,a=n.data,c={type:x,collections:a,collection:a[0]||{}},t(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(I.jsx)(b.a,{className:"main",children:Object(I.jsxs)(j.a,{basename:"/admin-ui",children:[Object(I.jsx)(U,{}),Object(I.jsxs)(b.a,{children:[Object(I.jsx)(q,{}),Object(I.jsx)(xt,{style:{overflow:"auto"},children:Object(I.jsxs)(d.c,{children:[Object(I.jsx)(d.a,{path:"/",exact:!0,component:Be}),Object(I.jsx)(d.a,{path:"/collections",exact:!0,component:qe}),Object(I.jsx)(d.a,{path:"/data",exact:!0,component:ft}),Object(I.jsx)(d.a,{path:"/data/:collection",exact:!0,component:ft}),Object(I.jsx)(d.a,{path:"/files",exact:!0,component:Ot})]})})]})]})})},mt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,494)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},gt={collections:[],selectedCollection:void 0},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(K.a)(Object(K.a)({},e),{},{collections:t.collections||[]});case p:return Object(K.a)(Object(K.a)({},e),{},{collections:e.collections.concat(t.collection).sort((function(e,t){return e.name.localeCompare(t.name)}))});case m:var n=e.collections.filter((function(e){return e.id!==t.collection.id})).sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(K.a)(Object(K.a)({},e),{},{collections:n,selectedCollection:void 0});case g:var a=t.collection;return Object(K.a)(Object(K.a)({},e),{},{selectedCollection:a});case v:var c=t.collection;return e.collections=e.collections.map((function(e){return e.id===c.id?c:e})),e.selectedCollection=c,Object(K.a)({},e)}return e},yt=Object(s.b)(vt,Object(s.a)(u.a));"".concat("","/dark-theme.css");l.a.render(Object(I.jsx)(o.a,{store:yt,children:Object(I.jsx)(pt,{})}),document.getElementById("root")),mt()}},[[465,1,2]]]);
//# sourceMappingURL=main.490d5956.chunk.js.map